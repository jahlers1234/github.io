<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ahlers Arcade Scoreboard</title>
  <style>
    :root {
      --primary-color: #00ffcc;
      --secondary-color: #00aaff;
      --background-gradient: linear-gradient(45deg, #1a1a1a, #002244, #1a1a1a);
    }
    :root.theme-pink {
      --primary-color: #FF2079;
      --secondary-color: #C71585;
      --background-gradient: linear-gradient(45deg, #1a1a1a, #4B0082, #1a1a1a);
    }
    body {
      font-family: 'Orbitron', sans-serif;
      background: var(--background-gradient);
      background-size: 400%;
      animation: gradientShift 15s ease infinite;
      margin: 0;
      padding: 10px;
      color: #fff;
      overflow: hidden;
      zoom: 0.98;
      font-weight: bold;
    }
    @keyframes gradientShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    .container {
      width: 98vw;
      height: 95vh;
      margin: 10px auto;
      background: rgba(0, 0, 0, 0.4);
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 0 25px var(--primary-color), inset 0 0 12px var(--secondary-color);
      position: relative;
      z-index: 1;
      display: flex;
      flex-direction: column;
    }
    .cyber-grid {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><path d="M0 0v100h100V0H0zm5 5h90v90H5V5z" fill="none" stroke="rgba(0,255,204,0.2)" stroke-width="0.5"/></svg>') repeat;
      opacity: 0.3;
      z-index: 1;
      animation: gridPulse 10s infinite;
    }
    @keyframes gridPulse {
      0%, 100% { opacity: 0.3; }
      50% { opacity: 0.5; }
    }
    h1 {
      text-align: center;
      color: var(--primary-color);
      font-size: 44px;
      margin: 10px 0;
      text-shadow: 0 0 15px var(--primary-color), 0 0 25px var(--secondary-color);
      animation: glow 2s ease-in-out infinite;
    }
    @keyframes glow {
      0%, 100% { text-shadow: 0 0 15px var(--primary-color), 0 0 25px var(--secondary-color); }
      50% { text-shadow: 0 0 25px var(--primary-color), 0 0 35px var(--secondary-color); }
    }
    .tabs {
      display: flex;
      justify-content: center;
      margin-bottom: 20px;
    }
    .tab {
      padding: 7px 16px;
      cursor: pointer;
      background: rgba(var(--secondary-color-rgb, 0, 170, 255), 0.2);
      margin: 0 3px;
      border-radius: 8px;
      font-size: 10.8px;
      transition: all 0.3s;
      border: 1px solid var(--primary-color);
      text-shadow: 0 0 5px var(--primary-color);
    }
    .tab:hover {
      background: var(--secondary-color);
      box-shadow: 0 0 15px var(--secondary-color);
      transform: translateY(-2px);
    }
    .tab.active {
      background: var(--primary-color);
      color: #000;
      box-shadow: 0 0 20px var(--primary-color);
      text-shadow: none;
    }
    .tab.hidden {
      display: none;
    }
    .league {
      display: none;
      flex-grow: 1;
      max-height: 80vh;
      overflow-y: auto;
      scrollbar-width: none;
      -ms-overflow-style: none;
    }
    .league::-webkit-scrollbar {
      display: none;
    }
    .league.active {
      display: block;
    }
    #nfl-scores, #mlb-scores, #nhl-scores, #ncaab-scores, #nba-scores, #dgpt, #standings {
      overflow-y: auto;
      max-height: 80vh;
      scrollbar-width: none;
      -ms-overflow-style: none;
    }
    #nfl-scores::-webkit-scrollbar, #mlb-scores::-webkit-scrollbar, #nhl-scores::-webkit-scrollbar, #ncaab-scores::-webkit-scrollbar, #nba-scores::-webkit-scrollbar, #dgpt::-webkit-scrollbar, #standings::-webkit-scrollbar {
      display: none;
    }
    .section {
      margin-bottom: 20px;
    }
    .section h2 {
      color: var(--primary-color);
      font-size: 36px;
      text-align: center;
      text-shadow: 0 0 15px var(--primary-color);
    }
    .game {
      display: flex;
      flex-direction: column;
      background: rgba(0, 0, 0, 0.3);
      margin: 15px 0;
      padding: 25px;
      border-radius: 10px;
      border: 1px solid var(--secondary-color);
      box-shadow: 0 0 15px rgba(var(--secondary-color-rgb, 0, 170, 255), 0.5);
      transition: transform 0.3s;
      min-height: 180px;
    }
    .game:hover {
      transform: scale(1.02);
    }
    .game:has(.score.live) {
      animation: rainbowGlow 3s ease-in-out infinite;
    }
    @keyframes rainbowGlow {
      0% { box-shadow: 0 0 15px #ff0000, inset 0 0 12px #ff0000; }
      16.67% { box-shadow: 0 0 15px #ff9900, inset 0 0 12px #ff9900; }
      33.33% { box-shadow: 0 0 15px #ffff00, inset 0 0 12px #ffff00; }
      50% { box-shadow: 0 0 15px #00ff00, inset 0 0 12px #00ff00; }
      66.67% { box-shadow: 0 0 15px #00ffff, inset 0 0 12px #00ffff; }
      83.33% { box-shadow: 0 0 15px #ff00ff, inset 0 0 12px #ff00ff; }
      100% { box-shadow: 0 0 15px #ff0000, inset 0 0 12px #ff0000; }
    }
    .teams-container {
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;
    }
    .team {
      display: flex;
      align-items: center;
      width: 45%;
      font-size: 27px;
    }
    .team.away {
      justify-content: flex-end;
    }
    .team img {
      width: 56px;
      height: 56px;
      margin: 0 15px;
      filter: drop-shadow(0 0 5px var(--primary-color));
    }
    .rank, .record {
      font-size: 18.9px;
      margin: 0 5px;
      color: var(--primary-color);
      text-shadow: 0 0 5px var(--primary-color);
    }
    .score {
      font-size: 37.8px;
      font-weight: bold;
      margin: 0 25px;
      color: var(--primary-color);
      text-shadow: 0 0 10px var(--primary-color);
      transition: transform 0.3s;
    }
    .score.live {
      animation: pulse 1.5s infinite;
    }
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.15); }
      100% { transform: scale(1); }
    }
    .info-container {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 15px;
      width: 100%;
    }
    .status {
      text-align: center;
      font-size: 24.3px;
      color: var(--secondary-color);
      text-shadow: 0 0 5px var(--secondary-color);
      flex: 1;
    }
    .channel, .time, .spread {
      font-size: 21.6px;
      color: #fff;
      text-shadow: 0 0 5px var(--secondary-color);
      flex: 1;
      text-align: center;
    }
    .stats {
      text-align: center;
      font-size: 21.6px;
      color: #fff;
      margin-top: 8px;
      text-shadow: 0 0 5px var(--secondary-color);
    }
    .diamond {
      width: 80px;
      height: 60px;
      margin: 10px auto;
    }
    .base {
      fill: none;
      stroke: #fff;
      stroke-width: 2;
    }
    .base.active {
      fill: var(--primary-color);
    }
    .no-games {
      text-align: center;
      color: #aaa;
      font-size: 24.3px;
      text-shadow: 0 0 5px #aaa;
    }
    #fullscreen-btn {
      position: fixed;
      top: 10px;
      right: 10px;
      font-size: 1.125em;
      padding: 2px;
      background: transparent;
      border: none;
      color: #FF2079;
      cursor: pointer;
      text-shadow: 0 0 5px #00FF9F;
      z-index: 2;
    }
    #fullscreen-btn:hover {
      color: #00FF9F;
      text-shadow: 0 0 10px #00FF9F;
    }
    #cycle-btn {
      position: fixed;
      top: 10px;
      left: 10px;
      font-size: 1.125em;
      padding: 2px;
      background: transparent;
      border: none;
      color: #FF2079;
      cursor: pointer;
      text-shadow: 0 0 5px #00FF9F;
      z-index: 2;
    }
    #cycle-btn:hover {
      color: #00FF9F;
      text-shadow: 0 0 10px #00FF9F;
    }
    #theme-btn {
      position: fixed;
      top: 10px;
      left: 50px;
      font-size: 1.125em;
      padding: 2px;
      background: transparent;
      border: none;
      color: #FF2079;
      cursor: pointer;
      text-shadow: 0 0 5px #00FF9F;
      z-index: 2;
    }
    #theme-btn:hover {
      color: #00FF9F;
      text-shadow: 0 0 10px #00FF9F;
    }
    #toggle-btn {
      position: fixed;
      top: 10px;
      left: 90px;
      font-size: 1.125em;
      padding: 2px;
      background: transparent;
      border: none;
      color: #FF2079;
      cursor: pointer;
      text-shadow: 0 0 5px #00FF9F;
      z-index: 2;
    }
    #toggle-btn:hover {
      color: #00FF9F;
      text-shadow: 0 0 10px #00FF9F;
    }
    .schedule-table {
      width: 100%;
      border-collapse: collapse;
      background: rgba(0, 0, 0, 0.8);
      border-radius: 10px;
      border: 1px solid var(--secondary-color);
      box-shadow: 0 0 15px rgba(var(--secondary-color-rgb, 0, 170, 255), 0.5);
      margin: 15px 0;
    }
    .schedule-table th, .schedule-table td {
      padding: 15px;
      text-align: left;
      font-size: 24.3px;
      color: #fff;
      text-shadow: 0 0 5px var(--secondary-color);
      border-bottom: 1px solid rgba(var(--secondary-color-rgb, 0, 170, 255), 0.3);
    }
    .schedule-table th {
      background: rgba(var(--secondary-color-rgb, 0, 170, 255), 0.2);
      color: var(--primary-color);
      text-shadow: 0 0 5px var(--primary-color);
    }
    .schedule-table tr:hover {
      background: rgba(var(--secondary-color-rgb, 0, 170, 255), 0.1);
    }
    .standings-container {
        display: flex;
        flex-wrap: wrap;
        justify-content: space-around;
        gap: 20px;
    }
    .standings-division {
        flex: 1 1 45%;
        min-width: 300px;
    }
    .standings-division h3 {
        color: var(--secondary-color);
        text-align: center;
        font-size: 28px;
        margin-bottom: 10px;
    }
    .standings-table {
      width: 100%;
      border-collapse: collapse;
      background: rgba(0, 0, 0, 0.8);
      border-radius: 10px;
      border: 1px solid var(--secondary-color);
      box-shadow: 0 0 15px rgba(var(--secondary-color-rgb, 0, 170, 255), 0.5);
      margin: 15px 0;
    }
    .standings-table th, .standings-table td {
      padding: 15px;
      text-align: left;
      font-size: 24.3px;
      color: #fff;
      text-shadow: 0 0 5px var(--secondary-color);
      border-bottom: 1px solid rgba(var(--secondary-color-rgb, 0, 170, 255), 0.3);
    }
    .standings-table th {
      background: #1a1a1a;
      color: var(--primary-color);
      text-shadow: 0 0 5px var(--primary-color);
      position: sticky;
      top: 0;
      z-index: 1;
    }
    .standings-table tr:hover {
      background: rgba(var(--secondary-color-rgb, 0, 170, 255), 0.1);
    }
    .standings-table img {
      width: 40px;
      height: 40px;
      margin-right: 10px;
      vertical-align: middle;
    }
    .countdown {
      text-align: center;
      font-size: 24.3px;
      color: var(--primary-color);
      text-shadow: 0 0 10px var(--primary-color);
      margin: 10px 0;
      padding: 10px;
      border: 1px solid var(--secondary-color);
      border-radius: 8px;
      background: rgba(0, 0, 0, 0.8);
    }
    @media (max-width: 768px) {
      .game { min-height: 140px; }
      .team { width: 100%; justify-content: center; margin: 8px 0; }
      .team.away { justify-content: center; }
      .score { font-size: 32.4px; }
      .rank, .record { font-size: 16.2px; }
      h1 { font-size: 39px; }
      .tab { font-size: 17.1px; padding: 10px 25px; }
      .team img { width: 50px; height: 50px; }
      .league { max-height: 75vh; }
      #nfl-scores, #mlb-scores, #nhl-scores, #ncaab-scores, #nba-scores, #dgpt, #standings { max-height: 75vh; }
      .channel, .time, .spread { font-size: 18.9px; }
      .stats { font-size: 18.9px; }
      .diamond { width: 70px; height: 50px; }
      .schedule-table th, .schedule-table td { font-size: 21.6px; padding: 10px; }
      .standings-table th, .standings-table td { font-size: 21.6px; padding: 10px; }
      .countdown { font-size: 21.6px; }
      .standings-table th { position: static; }
      #cycle-btn, #fullscreen-btn, #theme-btn, #toggle-btn { font-size: 0.945em; padding: 2px; }
      #toggle-btn { left: 80px; }
    }
    #settings-btn {
      position: fixed;
      top: 10px;
      left: 130px;
      font-size: 1.125em;
      padding: 2px;
      background: transparent;
      border: none;
      color: #FF2079;
      cursor: pointer;
      text-shadow: 0 0 5px #00FF9F;
      z-index: 2;
    }
    #settings-btn:hover {
      color: #00FF9F;
      text-shadow: 0 0 10px #00FF9F;
    }
    #settings-modal {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(0, 0, 0, 0.8);
      padding: 20px;
      border-radius: 10px;
      z-index: 3;
      color: #fff;
      box-shadow: 0 0 20px var(--primary-color);
      width: 300px;
    }
    #settings-modal h2, #settings-modal h3 {
      color: var(--primary-color);
      text-shadow: 0 0 5px var(--primary-color);
    }
    #settings-modal label {
      display: block;
      margin: 10px 0;
    }
    #settings-modal input[type="text"] {
      width: 100%;
      padding: 5px;
      background: rgba(255,255,255,0.1);
      border: 1px solid var(--secondary-color);
      color: #fff;
    }
    #settings-modal button {
      background: var(--primary-color);
      color: #000;
      border: none;
      padding: 10px 20px;
      cursor: pointer;
      border-radius: 5px;
    }
    @media (max-width: 768px) {
      #settings-btn { left: 120px; font-size: 0.945em; }
      #settings-modal { width: 90%; }
    }
  </style>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
  <div class="cyber-grid"></div>
  <button id="cycle-btn">ğŸŒ</button>
  <button id="theme-btn">ğŸŒ™</button>
  <button id="toggle-btn">âŒ</button>
  <button id="fullscreen-btn">ğŸ“º</button>
  <button id="settings-btn">âš™ï¸</button>
  <div id="settings-modal">
    <h2>Settings</h2>
    <label>Header Name: <input type="text" id="header-input"></label>
    <h3>Toggle Leagues:</h3>
    <div id="league-toggles"></div>
    <button id="save-settings">Save</button>
  </div>
  <div class="container">
    <h1>Ahlers Arcade Scoreboard</h1>
    <div class="tabs">
      <div class="tab active" data-league="ncaa">NCAA Football</div>
      <div class="tab" data-league="nfl">NFL</div>
      <div class="tab" data-league="mlb">MLB</div>
      <div class="tab" data-league="nhl">NHL</div>
      <div class="tab" data-league="ncaab">NCAAB</div>
      <div class="tab" data-league="ncaabb">NCAA Baseball</div>
      <div class="tab" data-league="nba">NBA</div>
      <div class="tab" data-league="dgpt">DGPT</div>
      <div class="tab" data-league="standings">Standings</div>
    </div>
    <div id="ncaa" class="league active">
      <div class="section" id="ncaa-current">
        <h2>Live Now</h2>
        <div id="ncaa-current-games"></div>
      </div>
      <div class="section" id="ncaa-upcoming">
        <h2>Upcoming Games</h2>
        <div id="ncaa-upcoming-games"></div>
      </div>
    </div>
    <div id="nfl" class="league">
      <div id="nfl-scores"></div>
    </div>
    <div id="mlb" class="league">
      <div id="mlb-scores"></div>
    </div>
    <div id="nhl" class="league">
      <div id="nhl-scores"></div>
    </div>
    <div id="ncaab" class="league">
      <div class="section" id="ncaab-current">
        <h2>Live Now</h2>
        <div id="ncaab-current-games"></div>
      </div>
      <div class="section" id="ncaab-upcoming">
        <h2>Upcoming Games</h2>
        <div id="ncaab-upcoming-games"></div>
      </div>
    </div>
    <div id="ncaabb" class="league">
      <div class="section" id="ncaabb-current">
        <h2>Live Now</h2>
        <div id="ncaabb-current-games"></div>
      </div>
      <div class="section" id="ncaabb-upcoming">
        <h2>Upcoming Games</h2>
        <div id="ncaabb-upcoming-games"></div>
      </div>
    </div>
    <div id="nba" class="league">
      <div id="nba-scores"></div>
    </div>
    <div id="dgpt" class="league">
      <div class="section">
        <h2>2026 DGPT Schedule</h2>
        <div id="countdown"></div>
        <div id="dgpt-schedule"></div>
      </div>
    </div>
    <div id="standings" class="league">
      <!-- NFL Standings Section -->
      <div class="section" id="nfl-standings-section" style="display: none;">
        <h2>NFL Standings</h2>
        <div id="nfl-standings"></div>
      </div>
      <!-- MLB Standings Section -->
      <div class="section" id="mlb-standings-section" style="display: none;">
        <h2>MLB Standings</h2>
        <div id="mlb-standings"></div>
      </div>
      <!-- NHL Standings Section -->
      <div class="section" id="nhl-standings-section" style="display: none;">
        <h2>NHL Standings</h2>
        <div id="nhl-standings"></div>
      </div>
      <!-- NBA Standings Section -->
      <div class="section" id="nba-standings-section" style="display: none;">
        <h2>NBA Standings</h2>
        <div id="nba-standings"></div>
      </div>
      <!-- NCAA Standings Sections -->
      <div class="section" id="ncaa-football-standings-section">
        <h2>NCAA Football AP Top 25</h2>
        <div id="ncaa-football-standings"></div>
      </div>
      <div class="section" id="ncaab-standings-section">
        <h2>NCAAB AP Top 25</h2>
        <div id="ncaab-standings"></div>
      </div>
    </div>
  </div>
<script>
Â  Â  const fullscreenBtn = document.getElementById('fullscreen-btn');
Â  Â  fullscreenBtn.addEventListener('click', () => {
Â  Â  Â  if (!document.fullscreenElement) {
Â  Â  Â  Â  document.documentElement.requestFullscreen().catch(err => console.log('Fullscreen error:', err));
Â  Â  Â  Â  fullscreenBtn.textContent = 'â¹ï¸';
Â  Â  Â  } else {
Â  Â  Â  Â  document.exitFullscreen();
Â  Â  Â  Â  fullscreenBtn.textContent = 'ğŸ“º';
Â  Â  Â  }
Â  Â  });
Â  Â  const cycleBtn = document.getElementById('cycle-btn');
Â  Â  let isCycling = false;
Â  Â  let scrollAnimationFrame = null;
Â  Â  const tabOrder = ['ncaa', 'nfl', 'mlb', 'nhl', 'ncaab', 'ncaabb', 'nba', 'dgpt', 'standings'];
Â  Â  let currentTabIndex = 0;
Â  Â  let isFilterActive = false;
Â  Â  let leaguesWithGames = {};

Â  Â  let liveGameIntervals = {};
Â  Â  let lastPlays = {};

Â  Â  const neonColorSchemes = [
Â  Â  Â  { primary: '#00FFCC', secondary: '#00AAFF', gradient: 'linear-gradient(45deg, #1a1a1a, #002244, #1a1a1a)' },
Â  Â  Â  { primary: '#FF2079', secondary: '#C71585', gradient: 'linear-gradient(45deg, #1a1a1a, #4B0082, #1a1a1a)' },
Â  Â  Â  { primary: '#FF00FF', secondary: '#CC00CC', gradient: 'linear-gradient(45deg, #1a1a1a, #660066, #1a1a1a)' },
Â  Â  Â  { primary: '#39FF14', secondary: '#00FF00', gradient: 'linear-gradient(45deg, #1a1a1a, #004400, #1a1a1a)' },
Â  Â  Â  { primary: '#FF9900', secondary: '#FF6600', gradient: 'linear-gradient(45deg, #1a1a1a, #662200, #1a1a1a)' },
Â  Â  Â  { primary: '#FFFF00', secondary: '#CCCC00', gradient: 'linear-gradient(45deg, #1a1a1a, #444400, #1a1a1a)' },
Â  Â  Â  { primary: '#FF3333', secondary: '#CC0000', gradient: 'linear-gradient(45deg, #1a1a1a, #660000, #1a1a1a)' },
Â  Â  Â  { primary: '#00FFFF', secondary: '#00CCCC', gradient: 'linear-gradient(45deg, #1a1a1a, #006666, #1a1a1a)' },
Â  Â  Â  { primary: '#FF00AA', secondary: '#AA0077', gradient: 'linear-gradient(45deg, #1a1a1a, #550044, #1a1a1a)' },
Â  Â  Â  { primary: '#33FF99', secondary: '#00CC66', gradient: 'linear-gradient(45deg, #1a1a1a, #003322, #1a1a1a)' },
Â  Â  Â  { primary: '#FF66FF', secondary: '#CC33CC', gradient: 'linear-gradient(45deg, #FF66FF, #CC33CC, #FF66FF)' },
Â  Â  Â  { primary: '#00FF99', secondary: '#00CC66', gradient: 'linear-gradient(45deg, #00FF99, #00CC66, #00FF99)' },
Â  Â  Â  { primary: '#FF9933', secondary: '#FF6600', gradient: 'linear-gradient(45deg, #FF9933, #FF6600, #FF9933)' },
Â  Â  Â  { primary: '#33CCFF', secondary: '#0099CC', gradient: 'linear-gradient(45deg, #33CCFF, #0099CC, #33CCFF)' }
Â  Â  ];

Â  Â  const proDivisions = {
Â  Â  Â  Â  nfl: {
Â  Â  Â  Â  Â  Â  'AFC East': ['Buffalo Bills', 'Miami Dolphins', 'New England Patriots', 'New York Jets'],
Â  Â  Â  Â  Â  Â  'AFC North': ['Baltimore Ravens', 'Cincinnati Bengals', 'Cleveland Browns', 'Pittsburgh Steelers'],
Â  Â  Â  Â  Â  Â  'AFC South': ['Houston Texans', 'Indianapolis Colts', 'Jacksonville Jaguars', 'Tennessee Titans'],
Â  Â  Â  Â  Â  Â  'AFC West': ['Denver Broncos', 'Kansas City Chiefs', 'Las Vegas Raiders', 'Los Angeles Chargers'],
Â  Â  Â  Â  Â  Â  'NFC East': ['Dallas Cowboys', 'New York Giants', 'Philadelphia Eagles', 'Washington Commanders'],
Â  Â  Â  Â  Â  Â  'NFC North': ['Chicago Bears', 'Detroit Lions', 'Green Bay Packers', 'Minnesota Vikings'],
Â  Â  Â  Â  Â  Â  'NFC South': ['Atlanta Falcons', 'Carolina Panthers', 'New Orleans Saints', 'Tampa Bay Buccaneers'],
Â  Â  Â  Â  Â  Â  'NFC West': ['Arizona Cardinals', 'Los Angeles Rams', 'San Francisco 49ers', 'Seattle Seahawks']
Â  Â  Â  Â  },
Â  Â  Â  Â  mlb: {
Â  Â  Â  Â  Â  Â  'AL East': ['Baltimore Orioles', 'Boston Red Sox', 'New York Yankees', 'Tampa Bay Rays', 'Toronto Blue Jays'],
Â  Â  Â  Â  Â  Â  'AL Central': ['Chicago White Sox', 'Cleveland Guardians', 'Detroit Tigers', 'Kansas City Royals', 'Minnesota Twins'],
Â  Â  Â  Â  Â  Â  'AL West': ['Houston Astros', 'Los Angeles Angels', 'Oakland Athletics', 'Seattle Mariners', 'Texas Rangers'],
Â  Â  Â  Â  Â  Â  'NL East': ['Atlanta Braves', 'Miami Marlins', 'New York Mets', 'Philadelphia Phillies', 'Washington Nationals'],
Â  Â  Â  Â  Â  Â  'NL Central': ['Chicago Cubs', 'Cincinnati Reds', 'Milwaukee Brewers', 'Pittsburgh Pirates', 'St. Louis Cardinals'],
Â  Â  Â  Â  Â  Â  'NL West': ['Arizona Diamondbacks', 'Colorado Rockies', 'Los Angeles Dodgers', 'San Diego Padres', 'San Francisco Giants']
Â  Â  Â  Â  }
Â  Â  };


Â  Â  function setRandomNeonColors() {
Â  Â  Â  const scheme = neonColorSchemes[Math.floor(Math.random() * neonColorSchemes.length)];
Â  Â  Â  document.documentElement.style.setProperty('--primary-color', scheme.primary);
Â  Â  Â  document.documentElement.style.setProperty('--secondary-color', scheme.secondary);
Â  Â  Â  document.documentElement.style.setProperty('--background-gradient', scheme.gradient);
Â  Â  Â  document.documentElement.classList.remove('theme-pink');
Â  Â  Â  console.log('Applied neon color scheme:', scheme);
Â  Â  }
Â  Â  function cycleTabsTo(index) {
Â  Â  Â  if (!isCycling) return;
Â  Â  Â  stopAutoScroll();
Â  Â  Â  document.querySelectorAll('.tabs .tab').forEach(t => t.classList.remove('active'));
Â  Â  Â  document.querySelectorAll('.league').forEach(l => l.classList.remove('active'));
Â  Â  Â  let nextIndex = index;
Â  Â  Â  let attempts = 0;
Â  Â  Â  const maxAttempts = tabOrder.length;
Â  Â  Â  while (attempts < maxAttempts) {
Â  Â  Â  Â  const league = tabOrder[nextIndex];
Â  Â  Â  Â  const tab = document.querySelector(`.tab[data-league="${league}"]`);
Â  Â  Â  Â  if (leagueVisibility[league] !== false && (!isFilterActive || league === 'dgpt' || league === 'standings' || leaguesWithGames[league])) {
Â  Â  Â  Â  Â  setRandomNeonColors();
Â  Â  Â  Â  Â  tab.classList.add('active');
Â  Â  Â  Â  Â  const leagueContainer = document.getElementById(league);
Â  Â  Â  Â  Â  leagueContainer.classList.add('active');
Â  Â  Â  Â  Â  const containerId = league === 'ncaa' ? 'ncaa' : league === 'nfl' ? 'nfl-scores' : league === 'mlb' ? 'mlb-scores' : league === 'nhl' ? 'nhl-scores' : league === 'ncaab' ? 'ncaab' : league === 'ncaabb' ? 'ncaabb' : league === 'nba' ? 'nba-scores' : league === 'dgpt' ? 'dgpt' : 'standings';
Â  Â  Â  Â  Â  const duration = league === 'ncaa' || league === 'ncaab' || league === 'ncaabb' ? 267750 : league === 'dgpt' ? 33469 : league === 'standings' ? 98438 : 157500;
Â  Â  Â  Â  Â  fetchScores(league).then(() => {
Â  Â  Â  Â  Â  Â  const container = document.getElementById(containerId);
Â  Â  Â  Â  Â  Â  if (!container) {
Â  Â  Â  Â  Â  Â  Â  console.error(`Container not found for ${containerId}`);
Â  Â  Â  Â  Â  Â  Â  currentTabIndex = (nextIndex + 1) % tabOrder.length;
Â  Â  Â  Â  Â  Â  Â  setTimeout(() => cycleTabsTo(currentTabIndex), 5000);
Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  container.scrollTop = 0;
Â  Â  Â  Â  Â  Â  const scrollDistance = container.scrollHeight - container.clientHeight;
Â  Â  Â  Â  Â  Â  console.log(`Starting scroll for ${containerId}: scrollHeight=${container.scrollHeight}, clientHeight=${container.clientHeight}, scrollDistance=${scrollDistance}, duration=${duration}ms`);
Â  Â  Â  Â  Â  Â  if (scrollDistance <= 0) {
Â  Â  Â  Â  Â  Â  Â  console.log(`No scrolling needed for ${containerId}`);
Â  Â  Â  Â  Â  Â  Â  currentTabIndex = (nextIndex + 1) % tabOrder.length;
Â  Â  Â  Â  Â  Â  Â  setTimeout(() => cycleTabsTo(currentTabIndex), 5000);
Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  const startTime = performance.now();
Â  Â  Â  Â  Â  Â  function scrollStep(timestamp) {
Â  Â  Â  Â  Â  Â  Â  if (!isCycling) return;
Â  Â  Â  Â  Â  Â  Â  const elapsed = timestamp - startTime;
Â  Â  Â  Â  Â  Â  Â  const progress = Math.min(elapsed / duration, 1);
Â  Â  Â  Â  Â  Â  	container.scrollTop = scrollDistance * progress;
Â  Â  Â  Â  Â  Â  	if (progress < 1) {
Â  Â  Â  Â  Â  Â  Â  	scrollAnimationFrame = requestAnimationFrame(scrollStep);
Â  Â  Â  Â  Â  Â  	} else {
Â  Â  Â  Â  Â  Â  Â  	currentTabIndex = (nextIndex + 1) % tabOrder.length;
Â  Â  Â  Â  Â  Â  Â  	setTimeout(() => cycleTabsTo(currentTabIndex), 1000);
Â  Â  Â  Â  Â  Â  	}
Â  Â  Â  Â  Â  	}
Â  Â  Â  Â  Â  	scrollAnimationFrame = requestAnimationFrame(scrollStep);
Â  Â  Â  Â  	}).catch(err => {
Â  Â  Â  Â  Â  	console.error(`Error fetching scores for ${league}:`, err);
Â  Â  Â  Â  Â  	currentTabIndex = (nextIndex + 1) % tabOrder.length;
Â  Â  Â  Â  Â  	setTimeout(() => cycleTabsTo(currentTabIndex), 5000);
Â  Â  Â  Â  	});
Â  Â  Â  Â  	return;
Â  Â  Â  	}
Â  Â  Â  	nextIndex = (nextIndex + 1) % tabOrder.length;
Â  Â  Â  	attempts++;
Â  Â  	}
Â  Â  	console.warn('No visible tabs available for cycling');
Â  Â  	isCycling = false;
Â  Â  	cycleBtn.textContent = 'ğŸŒ';
Â  	}
Â  	function cycleTabs() {
Â  Â  	if (isCycling) {
Â  Â  Â  	isCycling = false;
Â  Â  Â  	stopAutoScroll();
Â  Â  Â  	cycleBtn.textContent = 'ğŸŒ';
Â  Â  Â  	console.log('Stopping cycle');
Â  Â  Â  	return;
Â  Â  	}
Â  Â  	isCycling = true;
Â  Â  	cycleBtn.textContent = 'â¹ï¸';
Â  Â  	console.log('Starting continuous cycle through tabs');
Â  Â  	currentTabIndex = 0;
Â  Â  	cycleTabsTo(currentTabIndex);
Â  	}
Â  	cycleBtn.addEventListener('click', cycleTabs);
Â  	const themeBtn = document.getElementById('theme-btn');
Â  	themeBtn.addEventListener('click', () => {
Â  Â  	document.documentElement.classList.toggle('theme-pink');
Â  Â  	console.log('Toggling theme to ' + (document.documentElement.classList.contains('theme-pink') ? 'pink' : 'blue'));
Â  	});
Â  	const toggleBtn = document.getElementById('toggle-btn');
Â  	toggleBtn.addEventListener('click', () => {
Â  Â  Â  isFilterActive = !isFilterActive;
Â  Â  Â  toggleBtn.textContent = isFilterActive ? 'âœ”' : 'âŒ';
Â  Â  Â  updateTabVisibility();
Â  	});
Â  	function updateTabVisibility() {
Â  Â  Â  const filterableLeagues = ['ncaa', 'nfl', 'mlb', 'nhl', 'ncaab', 'ncaabb', 'nba'];
Â  Â  Â  document.querySelectorAll('.tabs .tab').forEach(tab => {
Â  Â  Â  Â  const league = tab.dataset.league;
Â  Â  Â  Â  if (filterableLeagues.includes(league) && isFilterActive) {
Â  Â  Â  Â  Â  tab.classList.toggle('hidden', !leaguesWithGames[league]);
Â  Â  Â  Â  Â  if (!leaguesWithGames[league] && tab.classList.contains('active')) {
Â  Â  Â  Â  Â  Â  document.querySelectorAll('.tabs .tab').forEach(t => t.classList.remove('active'));
Â  Â  Â  Â  Â  Â  document.querySelectorAll('.league').forEach(l => l.classList.remove('active'));
Â  Â  Â  Â  Â  Â  const ncaaTab = document.querySelector('.tab[data-league="ncaa"]');
Â  Â  Â  Â  Â  Â  if (leaguesWithGames['ncaa']) {
Â  Â  Â  Â  Â  Â  Â  ncaaTab.classList.add('active');
Â  Â  Â  Â  Â  Â  Â  document.getElementById('ncaa').classList.add('active');
Â  Â  Â  Â  Â  Â  Â  startAutoScroll('ncaa', 267750);
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  const standingsTab = document.querySelector('.tab[data-league="standings"]');
Â  Â  Â  Â  Â  Â  Â  standingsTab.classList.add('active');
Â  Â  Â  Â  Â  Â  Â  document.getElementById('standings').classList.add('active');
Â  Â  Â  Â  Â  Â  	startAutoScroll('standings', 98438);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  }
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  tab.classList.remove('hidden');
Â  Â  Â  Â  }
Â  Â  Â  });
Â  	}
Â  	const leagues = {
Â  Â  Â  ncaa: { sport: 'football', league: 'college-football' },
Â  Â  Â  nfl: { sport: 'football', league: 'nfl' },
Â  Â  Â  mlb: { sport: 'baseball', league: 'mlb' },
Â  Â  Â  nhl: { sport: 'hockey', league: 'nhl' },
Â  Â  Â  ncaab: { sport: 'basketball', league: 'mens-college-basketball' },
Â  Â  Â  ncaabb: { sport: 'baseball', league: 'college-baseball' },
Â  Â  Â  nba: { sport: 'basketball', league: 'nba' },
Â  Â  Â  dgpt: 'discgolf/mens-dgpt',
Â  Â  Â  standings: 'standings'
Â  	};
Â  	function startAutoScroll(containerId, duration) {
Â  Â  	 Â if (scrollAnimationFrame) {
Â  Â  Â  Â  	cancelAnimationFrame(scrollAnimationFrame);
Â  Â  Â  	}
Â  Â  Â  	const container = document.getElementById(containerId);
Â  Â  Â  	if (!container) {
Â  Â  Â  Â  	console.error(`Container not found for ${containerId}`);
Â  Â  Â  Â  	return;
Â  Â  Â  	}

Â  Â  Â  	// Use a short timeout to allow the DOM to update with fetched content
Â  Â  Â  	setTimeout(() => {
Â  Â  Â  Â  	container.scrollTop = 0;
Â  Â  Â  Â  	const scrollDistance = container.scrollHeight - container.clientHeight;
Â  Â  Â  Â  	
Â  Â  Â  Â  	console.log(`Starting scroll for ${containerId}: scrollHeight=${container.scrollHeight}, clientHeight=${container.clientHeight}, scrollDistance=${scrollDistance}, duration=${duration}ms`);

Â  Â  Â  Â  	if (scrollDistance <= 0) {
Â  Â  Â  Â  Â  	console.log(`No scrolling needed for ${containerId}`);
Â  Â  Â  Â  Â  	return;
Â  Â  Â  Â  	}

Â  Â  Â  Â  	let startTime = performance.now();

Â  Â  Â  Â  	function scrollStep(timestamp) {
Â  Â  Â  Â  Â  	const leagueDiv = container.closest('.league');
Â  Â  Â  Â  Â  	// Stop if tab is no longer active OR if cycling mode is initiated
Â  Â  Â  Â  Â  	if (!leagueDiv || !leagueDiv.classList.contains('active') || isCycling) {
Â  Â  Â  Â  Â  Â  	return; 
Â  Â  Â  Â  Â  	}

Â  Â  Â  Â  Â  	let elapsed = timestamp - startTime;

Â  Â  Â  Â  Â  	// Reset animation when it finishes to create a loop
Â  Â  Â  Â  Â  	if (elapsed > duration) {
Â  Â  Â  Â  Â  Â  	startTime = timestamp;
Â  Â  Â  Â  Â  Â  	elapsed = 0;
Â  Â  Â  Â  Â  	}

Â  Â  Â  Â  Â  	const progress = elapsed / duration;
Â  Â  Â  Â  Â  	container.scrollTop = scrollDistance * progress;

Â  Â  Â  Â  Â  	scrollAnimationFrame = requestAnimationFrame(scrollStep);
Â  Â  Â  Â  	}

Â  Â  Â  Â  	scrollAnimationFrame = requestAnimationFrame(scrollStep);
Â  Â  Â  	}, 250); // 250ms delay to ensure content is loaded
Â  	}
Â  	function stopAutoScroll() {
Â  Â  	if (scrollAnimationFrame) {
Â  Â  Â  	cancelAnimationFrame(scrollAnimationFrame);
Â  Â  Â  	console.log('Scroll stopped');
Â  Â  	}
Â  	}
Â  	function formatEasternTime(dateString, league) {
Â  Â  	const date = new Date(dateString);
Â  Â  	const today = new Date();
Â  Â  	today.setHours(0, 0, 0, 0);
Â  Â  	const eventDate = new Date(dateString);
Â  Â  	eventDate.setHours(0, 0, 0, 0);
Â  Â  	const isToday = isSameDay(eventDate, today);
Â  Â  	const time = date.toLocaleTimeString('en-US', {
Â  Â  Â  	timeZone: 'America/New_York',
Â  Â  Â  	hour: 'numeric',
Â  Â  Â  	minute: '2-digit',
Â  Â  Â  	hour12: true
Â  Â  	});
Â  Â  	const dateStr = date.toLocaleDateString('en-US', { timeZone: 'America/New_York', month: 'short', day: 'numeric' });
Â  Â  	let timeStr = isToday ? time : `${dateStr}, ${time}`;
Â  Â  	if (league === 'mlb' || league === 'college-baseball') return `First Pitch ${timeStr} ET`;
Â  Â  	if (league === 'ncaa' || league === 'nfl') return `Kickoff ${timeStr} ET`;
Â  Â  	if (league === 'ncaab' || league === 'nba') return `Tip-off ${timeStr} ET`;
Â  Â  	if (league === 'nhl') return `Puck Drop ${timeStr} ET`;
Â  Â  	return `${timeStr} ET`;
Â  	}
Â  	function formatRecord(record) {
Â  Â  	return record ? `(${record})` : '';
Â  	}
Â  	function formatDateForESPN(date) {
Â  Â  	const year = date.getFullYear();
Â  Â  	const month = String(date.getMonth() + 1).padStart(2, '0');
Â  Â  	const day = String(date.getDate()).padStart(2, '0');
Â  Â  	return `${year}${month}${day}`;
Â  	}
Â  	function isSameDay(date1, date2) {
Â  Â  	return date1.getFullYear() === date2.getFullYear() &&
Â  Â  Â  Â  	 Â date1.getMonth() === date2.getMonth() &&
Â  Â  Â  Â  	 Â date1.getDate() === date2.getDate();
Â  	}
Â  	function filterTodayOnly(events) {
Â  Â  	const today = new Date();
Â  Â  	today.setHours(0, 0, 0, 0);
Â  Â  	return events.filter(event => {
Â  Â  Â  	const eventDate = new Date(event.date || event.startTimeUTC);
Â  Â  Â  	eventDate.setHours(0, 0, 0, 0);
Â  Â  Â  	return isSameDay(eventDate, today);
Â  Â  	});
Â  	}
Â  	function filterTodayAndTomorrow(events) {
Â  Â  	const today = new Date();
Â  Â  	today.setHours(0, 0, 0, 0);
Â  Â  	const tomorrow = new Date(today);
Â  Â  	tomorrow.setDate(today.getDate() + 1);
Â  Â  	return events.filter(event => {
Â  Â  Â  	const eventDate = new Date(event.date);
Â  Â  Â  	eventDate.setHours(0, 0, 0, 0);
Â  Â  Â  	return isSameDay(eventDate, today) || isSameDay(eventDate, tomorrow);
Â  Â  	});
Â  	}

Â  	function formatStatLeaders(leaders) {
Â  	 Â if (!leaders || leaders.length === 0) {
Â  Â  Â  Â  	 Â return '<div class="stats" style="text-align: center;">Stat leaders not available for this game.</div>';
Â  Â  Â  	 Â }
Â  Â  Â  	
Â  Â  Â  	let statContent = '';
Â  Â  Â  	leaders.forEach(leaderCategory => {
Â  Â  Â  Â  	 Â if (leaderCategory.leaders && leaderCategory.leaders.length > 0 && leaderCategory.leaders[0].athlete) {
Â  Â  Â  Â  Â  	 Â  	leaderCategory.leaders.slice(0, 2).forEach(leader => {
Â  Â  Â  Â  Â  Â  	 Â  	 Â statContent += `<div>${leader.athlete.displayName} (${leader.displayValue})</div>`;
Â  Â  Â  Â  Â  Â  	 	});
Â  Â  Â  Â  Â  	}
Â  Â  Â  	});

Â  Â  Â  	if (statContent) {
Â  Â  Â  Â  	return `
Â  Â  Â  Â  Â  Â  Â  	<div class="stats stats-leaders" style="font-size: 18.9px; text-align: center; padding: 10px 0; line-height: 1.6;">
Â  Â  Â  Â  Â  Â  Â  		<h3 style="color: var(--primary-color); margin: 0 0 5px 0; font-size: 22px; text-align: center;">Stat Leaders</h3>
Â  Â  Â  Â  Â  Â  Â  		${statContent}
Â  Â  Â  Â  Â  Â  Â  	</div>
Â  Â  Â  Â  Â  	`;
Â  Â  Â  	}
Â  Â  Â  	return '<div class="stats" style="text-align: center;">Stat leaders not available for this game.</div>';
Â  	}

Â  	function getOrdinal(n) {
Â  Â  Â  Â  const s = ["th", "st", "nd", "rd"];
Â  Â  Â  Â  const v = n % 100;
Â  Â  Â  Â  return s[(v - 20) % 10] || s[v] || s[0];
Â  Â  }

Â  	async function fetchNCAAGames() {
Â  Â  	const currentDate = new Date();
Â  Â  	currentDate.setHours(0, 0, 0, 0);
Â  Â  	const futureDate = new Date(currentDate);
Â  Â  	futureDate.setDate(currentDate.getDate() + 7);
Â  Â  	const currentContainer = document.getElementById('ncaa-current-games');
Â  Â  	const upcomingContainer = document.getElementById('ncaa-upcoming-games');
Â  Â  	let hasGames = false;
Â  Â  	try {
Â  Â  Â  	const currentUrl = `https://site.api.espn.com/apis/site/v2/sports/football/college-football/scoreboard?dates=${formatDateForESPN(currentDate)}&groups=80`;
Â  Â  Â  	const currentResponse = await fetch(currentUrl);
Â  Â  Â  	if (!currentResponse.ok) throw new Error(`HTTP ${currentResponse.status}`);
Â  Â  Â  	const currentData = await currentResponse.json();
Â  Â  Â  	const currentGames = currentData.events?.filter(event => event.status.type.state === 'in') || [];
Â  Â  Â  	hasGames = currentGames.length > 0;
Â  Â  Â  	currentContainer.innerHTML = currentGames.length === 0 ? '<p class="no-games">No games are live right now.</p>' : '';
Â  Â  Â  	currentGames.forEach(event => {
Â  Â  Â  Â  	const gameDiv = document.createElement('div');
Â  Â  Â  Â  	gameDiv.className = 'game';
Â  Â  Â  Â  	gameDiv.id = `game-${event.id}`;
Â  Â  Â  Â  	const homeTeam = event.competitions[0].competitors.find(c => c.homeAway === 'home');
Â  Â  Â  Â  	const awayTeam = event.competitions[0].competitors.find(c => c.homeAway === 'away');
Â  Â  Â  Â  	const awayLogo = awayTeam.team.logo || 'https://placehold.co/40x40';
Â  Â  Â  Â  	const homeLogo = homeTeam.team.logo || 'https://placehold.co/40x40';
Â  Â  Â  Â  	const scoreClass = 'score live';
Â  Â  Â  Â  	const awayRank = awayTeam.rank ? `#${awayTeam.rank}` : '';
Â  Â  Â  Â  	const homeRank = homeTeam.rank ? `#${homeTeam.rank}` : '';
Â  Â  Â  Â  	const awayRecord = formatRecord(awayTeam.records ? awayTeam.records[0]?.summary : '');
Â  Â  Â  Â  	const homeRecord = formatRecord(homeTeam.records ? homeTeam.records[0]?.summary : '');
Â  Â  Â  Â  	const away = `<div class="team away"><img loading="lazy" src="${awayLogo}" alt="${awayTeam.team.displayName} logo"><span class="rank">${awayRank}</span>${awayTeam.team.displayName}<span class="record">${awayRecord}</span> <span class="${scoreClass}">${awayTeam.score || 0}</span></div>`;
Â  Â  Â  Â  	const vs = `<div class="vs">@</div>`;
Â  Â  Â  Â  	const home = `<div class="team"><img loading="lazy" src="${homeLogo}" alt="${homeTeam.team.displayName} logo"><span class="rank">${homeRank}</span>${homeTeam.team.displayName}<span class="record">${homeRecord}</span> <span class="${scoreClass}">${homeTeam.score || 0}</span></div>`;
Â  Â  Â  Â  	const channel = event.competitions[0].broadcasts?.[0]?.names?.join(', ') || 'TBD';
Â  Â  Â  Â  	const situation = event.competitions[0].situation || {};
Â  Â  Â  Â  	const quarter = situation.period ? `Q${situation.period}` : (event.status.type.description.toLowerCase().includes('overtime') ? 'OT' : event.status.type.shortDetail || 'Live');
Â  Â  Â  Â  	const timeRemaining = event.status.displayClock || '';
Â  Â  Â  Â  	const status = [quarter, timeRemaining].filter(Boolean).join(' - ');
Â  Â  Â  Â  	const stats = situation.downDistanceText || '';
Â  Â  Â  Â  	const lastPlayText = situation.lastPlay ? situation.lastPlay.text : (lastPlays[event.id] || 'N/A');
Â  Â  Â  Â  	if (situation.lastPlay) lastPlays[event.id] = situation.lastPlay.text;
Â  Â  Â  Â  	const playUpdateHTML = `<div class="stats last-play">Last Play: ${lastPlayText}</div>`;

Â  Â  Â  Â  	gameDiv.innerHTML = `
Â  Â  Â  Â  Â  	<div class="teams-container">${away} ${vs} ${home}</div>
Â  Â  Â  Â  Â  	<div class="info-container">
Â  Â  Â  Â  Â  Â  	<div class="status">${status}</div>
Â  Â  Â  Â  Â  Â  	<div class="channel">Channel: ${channel}</div>
Â  Â  Â  Â  Â  	</div>
Â  Â  Â  Â  Â  	${stats ? `<div class="stats">${stats}</div>` : ''}
Â  Â  Â  Â  Â  	${playUpdateHTML}
Â  Â  Â  Â  	`;
Â  Â  Â  Â  	currentContainer.appendChild(gameDiv);
Â  Â  Â  	});
Â  Â  Â  	if (document.getElementById('ncaa').classList.contains('active') && !isCycling) {
Â  Â  Â  Â  	startAutoScroll('ncaa', 267750);
Â  Â  Â  	}
Â  Â  	} catch (error) {
Â  Â  Â  	console.error('Error fetching NCAA Football live games:', error);
Â  Â  Â  	currentContainer.innerHTML = '<p class="no-games">Error fetching live games.</p>';
Â  Â  	}
Â  Â  	try {
Â  Â  Â  	const upcomingUrl = `https://site.api.espn.com/apis/site/v2/sports/football/college-football/scoreboard?dates=${formatDateForESPN(currentDate)}-${formatDateForESPN(futureDate)}&groups=80`;
Â  Â  Â  	const upcomingResponse = await fetch(upcomingUrl);
Â  Â  Â  	if (!upcomingResponse.ok) throw new Error(`HTTP ${upcomingResponse.status}`);
Â  Â  Â  	const upcomingData = await upcomingResponse.json();
Â  Â  Â  	const upcomingGames = upcomingData.events?.filter(event => {
Â  Â  Â  Â  	const competitors = event.competitions[0].competitors;
Â  Â  Â  Â  	return event.status.type.state !== 'in' && (competitors.some(c => c.rank && c.rank <= 25) || event.status.type.state === 'pre' || event.status.type.state === 'post');
Â  Â  Â  	}) || [];
Â  Â  Â  	hasGames = hasGames || upcomingGames.length > 0 || currentGames.length > 0;
Â  Â  Â  	leaguesWithGames['ncaa'] = hasGames;
Â  Â  Â  	upcomingContainer.innerHTML = upcomingGames.length === 0 ? '<p class="no-games">No other big games scheduled this week.</p>' : '';
Â  Â  Â  	upcomingGames.forEach(event => {
Â  Â  Â  Â  	const gameDiv = document.createElement('div');
Â  Â  Â  Â  	gameDiv.className = 'game';
Â  Â  Â  Â  	const homeTeam = event.competitions[0].competitors.find(c => c.homeAway === 'home');
Â  Â  Â  Â  	const awayTeam = event.competitions[0].competitors.find(c => c.homeAway === 'away');
Â  Â  Â  Â  	const awayLogo = awayTeam.team.logo || 'https://placehold.co/40x40';
Â  Â  Â  Â  	const homeLogo = homeTeam.team.logo || 'https://placehold.co/40x40';
Â  Â  Â  Â  	const isCompleted = event.status.type.state === 'post';
Â  Â  Â  Â  	const awayRank = awayTeam.rank ? `#${awayTeam.rank}` : '';
Â  Â  Â  Â  	const homeRank = homeTeam.rank ? `#${homeTeam.rank}` : '';
Â  Â  Â  Â  	const awayRecord = formatRecord(awayTeam.records ? awayTeam.records[0]?.summary : '');
Â  Â  Â  Â  	const homeRecord = formatRecord(homeTeam.records ? homeTeam.records[0]?.summary : '');
Â  Â  Â  Â  	const away = `<div class="team away"><img loading="lazy" src="${awayLogo}" alt="${awayTeam.team.displayName} logo"><span class="rank">${awayRank}</span>${awayTeam.team.displayName}<span class="record">${awayRecord}</span> <span class="score">${awayTeam.score || ''}</span></div>`;
Â  Â  Â  Â  	const vs = `<div class="vs">@</div>`;
Â  Â  Â  Â  	const home = `<div class="team"><img loading="lazy" src="${homeLogo}" alt="${homeTeam.team.displayName} logo"><span class="rank">${homeRank}</span>${homeTeam.team.displayName}<span class="record">${homeRecord}</span> <span class="score">${homeTeam.score || ''}</span></div>`;
Â  Â  Â  Â  	const time = formatEasternTime(event.date, 'ncaa');
Â  Â  Â  Â  	const channel = event.competitions[0].broadcasts?.[0]?.names?.join(', ') || 'TBD';
Â  Â  Â  Â  	const spread = event.competitions[0].odds?.[0]?.details || 'N/A';
Â  Â  Â  Â  	const leadersHtml = isCompleted ? formatStatLeaders(event.competitions[0].leaders) : '';
Â  Â  Â  Â  	
Â  Â  Â  Â  	gameDiv.innerHTML = `
Â  Â  Â  Â  Â  	<div class="teams-container">${away} ${vs} ${home}</div>
Â  Â  Â  Â  Â  	<div class="info-container">
Â  Â  Â  Â  Â  Â  	<div class="time">${isCompleted ? 'Final' : time}</div>
Â  Â  Â  Â  Â  Â  	<div class="channel">Channel: ${channel}</div>
Â  Â  Â  Â  Â  Â  	<div class="spread">Spread: ${spread}</div>
Â  Â  Â  Â  Â  	</div>
Â  Â  Â  Â  Â  	${leadersHtml}
Â  Â  Â  Â  	`;
Â  Â  Â  Â  	upcomingContainer.appendChild(gameDiv);
Â  Â  Â  	});
Â  Â  Â  	if (document.getElementById('ncaa').classList.contains('active') && !isCycling) {
Â  Â  Â  Â  	startAutoScroll('ncaa', 267750);
Â  Â  Â  	}
Â  Â  Â  	updateTabVisibility();
Â  Â  	} catch (error) {
Â  Â  Â  	console.error('Error fetching NCAA Football upcoming games from ESPN:', error);
Â  Â  Â  	leaguesWithGames['ncaa'] = hasGames;
Â  Â  Â  	updateTabVisibility();
Â  Â  	}
Â  	}
Â  	async function fetchNCAABGames() {
Â  Â  	const currentDate = new Date();
Â  Â  	currentDate.setHours(0, 0, 0, 0);
Â  Â  	const futureDate = new Date(currentDate);
Â  Â  	futureDate.setDate(currentDate.getDate() + 7);
Â  Â  	const currentContainer = document.getElementById('ncaab-current-games');
Â  Â  	const upcomingContainer = document.getElementById('ncaab-upcoming-games');
Â  Â  	let hasGames = false;
Â  Â  	try {
Â  Â  Â  	const currentUrl = `https://site.api.espn.com/apis/site/v2/sports/basketball/mens-college-basketball/scoreboard?dates=${formatDateForESPN(currentDate)}&groups=50`;
Â  Â  Â  	const currentResponse = await fetch(currentUrl);
Â  Â  Â  	if (!currentResponse.ok) throw new Error(`HTTP ${currentResponse.status}`);
Â  Â  Â  	const currentData = await currentResponse.json();
Â  Â  Â  	const currentGames = currentData.events?.filter(event => event.status.type.state === 'in') || [];
Â  Â  Â  	hasGames = currentGames.length > 0;
Â  Â  Â  	currentContainer.innerHTML = currentGames.length === 0 ? '<p class="no-games">No games are live right now.</p>' : '';
Â  Â  Â  	currentGames.forEach(event => {
Â  Â  Â  Â  	const gameDiv = document.createElement('div');
Â  Â  Â  Â  	gameDiv.className = 'game';
Â  Â  Â  Â  	gameDiv.id = `game-${event.id}`;
Â  Â  Â  Â  	const homeTeam = event.competitions[0].competitors.find(c => c.homeAway === 'home');
Â  Â  Â  Â  	const awayTeam = event.competitions[0].competitors.find(c => c.homeAway === 'away');
Â  Â  Â  Â  	const awayLogo = awayTeam.team.logo || 'https://placehold.co/40x40';
Â  Â  Â  Â  	const homeLogo = homeTeam.team.logo || 'https://placehold.co/40x40';
Â  Â  Â  Â  	const scoreClass = 'score live';
Â  Â  Â  Â  	const awayRank = awayTeam.rank ? `#${awayTeam.rank}` : '';
Â  Â  Â  Â  	const homeRank = homeTeam.rank ? `#${homeTeam.rank}` : '';
Â  Â  Â  Â  	const awayRecord = formatRecord(awayTeam.records ? awayTeam.records[0]?.summary : '');
Â  Â  Â  Â  	const homeRecord = formatRecord(homeTeam.records ? homeTeam.records[0]?.summary : '');
Â  Â  Â  Â  	const away = `<div class="team away"><img loading="lazy" src="${awayLogo}" alt="${awayTeam.team.displayName} logo"><span class="rank">${awayRank}</span>${awayTeam.team.displayName}<span class="record">${awayRecord}</span> <span class="${scoreClass}">${awayTeam.score || 0}</span></div>`;
Â  Â  Â  Â  	const vs = `<div class="vs">@</div>`;
Â  Â  Â  Â  	const home = `<div class="team"><img loading="lazy" src="${homeLogo}" alt="${homeTeam.team.displayName} logo"><span class="rank">${homeRank}</span>${homeTeam.team.displayName}<span class="record">${homeRecord}</span> <span class="${scoreClass}">${homeTeam.score || 0}</span></div>`;
Â  Â  Â  Â  	const channel = event.competitions[0].broadcasts?.[0]?.names?.join(', ') || 'TBD';
Â  Â  Â  Â  	const situation = event.competitions[0].situation || {};
Â  Â  Â  Â  	const period = event.status.type.name === 'STATUS_HALFTIME' ? 'Halftime' : 
Â  Â  Â  Â  Â  Â  	(event.status.period > 2 ? `OT${event.status.period - 2}` : 
Â  Â  Â  Â  Â  Â  	(event.status.period === 1 ? '1st Half' : 
Â  Â  Â  Â  Â  Â  	(event.status.period === 2 ? '2nd Half' : event.status.type.shortDetail)));
Â  Â  Â  Â  	const timeRemaining = event.status.displayClock || '';
Â  Â  Â  Â  	const status = period;
Â  Â  Â  Â  	const stats = timeRemaining ? `${timeRemaining}` : '';
Â  Â  Â  Â  	
Â  Â  Â  Â  	const lastPlayText = situation.lastPlay ? situation.lastPlay.text : (lastPlays[event.id] || 'N/A');
Â  Â  Â  Â  	if (situation.lastPlay) lastPlays[event.id] = situation.lastPlay.text;
Â  Â  Â  Â  	const playUpdateHTML = `<div class="stats last-play">Last Play: ${lastPlayText}</div>`;

Â  Â  Â  Â  	gameDiv.innerHTML = `
Â  Â  Â  Â  Â  	<div class="teams-container">${away} ${vs} ${home}</div>
Â  Â  Â  Â  Â  	<div class="info-container">
Â  Â  Â  Â  Â  Â  	<div class="status">${status}</div>
Â  Â  Â  Â  Â  Â  	<div class="channel">Channel: ${channel}</div>
Â  Â  Â  Â  Â  	</div>
Â  Â  Â  Â  Â  	${stats ? `<div class="stats">${stats}</div>` : ''}
Â  Â  Â  Â  Â  	${playUpdateHTML}
Â  Â  Â  Â  	`;
Â  Â  Â  Â  	currentContainer.appendChild(gameDiv);
Â  Â  Â  	});
Â  Â  Â  	if (document.getElementById('ncaab').classList.contains('active') && !isCycling) {
Â  Â  Â  Â  	startAutoScroll('ncaab', 267750);
Â  Â  Â  	}
Â  Â  	} catch (error) {
Â  Â  Â  	console.error('Error fetching NCAAB live games:', error);
Â  Â  Â  	currentContainer.innerHTML = '<p class="no-games">Error fetching live games.</p>';
Â  Â  	}
Â  Â  	try {
Â  Â  Â  	const upcomingUrl = `https://site.api.espn.com/apis/site/v2/sports/basketball/mens-college-basketball/scoreboard?dates=${formatDateForESPN(currentDate)}-${formatDateForESPN(futureDate)}&groups=50`;
Â  Â  Â  	const upcomingResponse = await fetch(upcomingUrl);
Â  Â  Â  	if (!upcomingResponse.ok) throw new Error(`HTTP ${upcomingResponse.status}`);
Â  Â  Â  	const upcomingData = await upcomingResponse.json();
Â  Â  Â  	const upcomingGames = upcomingData.events?.filter(event => {
Â  Â  Â  Â  	 Â return event.status.type.state !== 'in';
Â  Â  Â  	}) || [];
Â  Â  Â  	hasGames = hasGames || upcomingGames.length > 0 || currentGames.length > 0;
Â  Â  Â  	leaguesWithGames['ncaab'] = hasGames;
Â  Â  Â  	upcomingContainer.innerHTML = upcomingGames.length === 0 ? '<p class="no-games">No other big games scheduled this week.</p>' : '';
Â  Â  Â  	upcomingGames.forEach(event => {
Â  Â  Â  Â  	const gameDiv = document.createElement('div');
Â  Â  Â  Â  	gameDiv.className = 'game';
Â  Â  Â  Â  	const homeTeam = event.competitions[0].competitors.find(c => c.homeAway === 'home');
Â  Â  Â  Â  	const awayTeam = event.competitions[0].competitors.find(c => c.homeAway === 'away');
Â  Â  Â  Â  	const awayLogo = awayTeam.team.logo || 'https://placehold.co/40x40';
Â  Â  Â  Â  	const homeLogo = homeTeam.team.logo || 'https://placehold.co/40x40';
Â  Â  Â  Â  	const isCompleted = event.status.type.state === 'post';
Â  Â  Â  Â  	const awayRank = awayTeam.rank ? `#${awayTeam.rank}` : '';
Â  Â  Â  Â  	const homeRank = homeTeam.rank ? `#${homeTeam.rank}` : '';
Â  Â  Â  Â  	const awayRecord = formatRecord(awayTeam.records ? awayTeam.records[0]?.summary : '');
Â  Â  Â  Â  	const homeRecord = formatRecord(homeTeam.records ? homeTeam.records[0]?.summary : '');
Â  Â  Â  Â  	const away = `<div class="team away"><img loading="lazy" src="${awayLogo}" alt="${awayTeam.team.displayName} logo"><span class="rank">${awayRank}</span>${awayTeam.team.displayName}<span class="record">${awayRecord}</span> <span class="${scoreClass}">${awayTeam.score || ''}</span></div>`;
Â  Â  Â  Â  	const vs = `<div class="vs">@</div>`;
Â  Â  Â  Â  	const home = `<div class="team"><img loading="lazy" src="${homeLogo}" alt="${homeTeam.team.displayName} logo"><span class="rank">${homeRank}</span>${homeTeam.team.displayName}<span class="record">${homeRecord}</span> <span class="${scoreClass}">${homeTeam.score || ''}</span></div>`;
Â  Â  Â  Â  	const time = formatEasternTime(event.date, 'ncaab');
Â  Â  Â  Â  	const channel = event.competitions[0].broadcasts?.[0]?.names?.join(', ') || 'TBD';
Â  Â  Â  Â  	const spread = event.competitions[0].odds?.[0]?.details || 'N/A';
Â  Â  Â  Â  	const leadersHtml = isCompleted ? formatStatLeaders(event.competitions[0].leaders) : '';

Â  Â  Â  Â  	gameDiv.innerHTML = `
Â  Â  Â  Â  Â  	<div class="teams-container">${away} ${vs} ${home}</div>
Â  Â  Â  Â  Â  	<div class="info-container">
Â  Â  Â  Â  Â  Â  	<div class="time">${isCompleted ? 'Final' : time}</div>
Â  Â  Â  Â  Â  Â  	<div class="channel">Channel: ${channel}</div>
Â  Â  Â  Â  Â  Â  	<div class="spread">Spread: ${spread}</div>
Â  Â  Â  Â  Â  	</div>
Â  Â  Â  Â  Â  	${leadersHtml}
Â  Â  Â  Â  	`;
Â  Â  Â  Â  	upcomingContainer.appendChild(gameDiv);
Â  Â  Â  	});
Â  Â  Â  	if (document.getElementById('ncaab').classList.contains('active') && !isCycling) {
Â  Â  Â  Â  	startAutoScroll('ncaab', 267750);
Â  Â  Â  	}
Â  Â  Â  	updateTabVisibility();
Â  Â  	} catch (error) {
Â  Â  Â  	console.error('Error fetching NCAAB upcoming games:', error);
Â  Â  Â  	leaguesWithGames['ncaab'] = hasGames;
Â  Â  Â  	updateTabVisibility();
Â  Â  	}
Â  	}
Â  	async function fetchNCAABBGames() {
Â  Â  	const currentDate = new Date();
Â  Â  	currentDate.setHours(0, 0, 0, 0);
Â  Â  	const currentContainer = document.getElementById('ncaabb-current-games');
Â  Â  	const upcomingContainer = document.getElementById('ncaabb-upcoming-games');
Â  Â  	let hasGames = false;
Â  Â  	try {
Â  Â  Â  	const currentUrl = `https://site.api.espn.com/apis/site/v2/sports/baseball/college-baseball/scoreboard?dates=${formatDateForESPN(currentDate)}`;
Â  Â  Â  	const currentResponse = await fetch(currentUrl);
Â  Â  Â  	if (!currentResponse.ok) throw new Error(`HTTP ${currentResponse.status}`);
Â  Â  Â  	const currentData = await currentResponse.json();
Â  Â  Â  	const events = currentData.events ? filterTodayOnly(currentData.events) : [];
Â  Â  Â  	const currentGames = events.filter(event => event.status.type.state === 'in');
Â  Â  Â  	const upcomingGames = events.filter(event => event.status.type.state !== 'in');
Â  Â  Â  	hasGames = currentGames.length > 0 || upcomingGames.length > 0;
Â  Â  Â  	leaguesWithGames['ncaabb'] = hasGames;
Â  Â  Â  	currentContainer.innerHTML = currentGames.length === 0 ? '<p class="no-games">No games are live right now.</p>' : '';
Â  Â  Â  	currentGames.forEach(event => {
Â  Â  Â  Â  	const gameDiv = document.createElement('div');
Â  Â  Â  Â  	gameDiv.className = 'game';
Â  Â  Â  Â  	gameDiv.id = `game-${event.id}`;
Â  Â  Â  Â  	const homeTeam = event.competitions[0].competitors.find(c => c.homeAway === 'home');
Â  Â  Â  Â  	const awayTeam = event.competitions[0].competitors.find(c => c.homeAway === 'away');
Â  Â  Â  Â  	const awayLogo = awayTeam.team.logo || 'https://placehold.co/40x40';
Â  Â  Â  Â  	const homeLogo = homeTeam.team.logo || 'https://placehold.co/40x40';
Â  Â  Â  Â  	const scoreClass = 'score live';
Â  Â  Â  Â  	const awayRank = awayTeam.rank ? `#${awayTeam.rank}` : '';
Â  Â  Â  Â  	const homeRank = homeTeam.rank ? `#${homeTeam.rank}` : '';
Â  Â  Â  Â  	const awayRecord = formatRecord(awayTeam.records ? awayTeam.records[0]?.summary : '');
Â  Â  Â  Â  	const homeRecord = formatRecord(homeTeam.records ? homeTeam.records[0]?.summary : '');
Â  Â  Â  Â  	const away = `<div class="team away"><img loading="lazy" src="${awayLogo}" alt="${awayTeam.team.displayName} logo"><span class="rank">${awayRank}</span>${awayTeam.team.displayName}<span class="record">${awayRecord}</span> <span class="${scoreClass}">${awayTeam.score || 0}</span></div>`;
Â  Â  Â  Â  	const vs = `<div class="vs">@</div>`;
Â  Â  Â  Â  	const home = `<div class="team"><img loading="lazy" src="${homeLogo}" alt="${homeTeam.team.displayName} logo"><span class="rank">${homeRank}</span>${homeTeam.team.displayName}<span class="record">${homeRecord}</span> <span class="${scoreClass}">${homeTeam.score || 0}</span></div>`;
Â  Â  Â  Â  	const channel = event.competitions[0].broadcasts?.[0]?.names?.join(', ') || 'TBD';
Â  Â  Â  Â  	const situation = event.competitions[0].situation || {};
Â  Â  Â  Â  	const status = event.status.type.detail;
Â  Â  Â  Â  	const count = (situation.balls != null && situation.strikes != null) ? `${situation.balls}-${situation.strikes} Count` : '';
Â  Â  Â  Â  	const outs = situation.outs != null ? `${situation.outs} Out${situation.outs !== 1 ? 's' : ''}` : '';
Â  Â  Â  Â  	const batter = situation.batter?.athlete?.displayName || 'Unknown';
Â  Â  Â  Â  	const pitcher = situation.pitcher?.athlete?.displayName || 'Unknown';
Â  Â  Â  Â  	const stats = [count, outs, `Batter: ${batter}`, `Pitcher: ${pitcher}`].filter(s => s).join(', ');
Â  Â  Â  Â  	const bases = {
Â  Â  Â  Â  Â  	first: situation.onFirst ? 'active' : '',
Â  Â  Â  Â  Â  	second: situation.onSecond ? 'active' : '',
Â  Â  Â  Â  Â  	third: situation.onThird ? 'active' : ''
Â  Â  Â  Â  	};
Â  Â  Â  Â  	const graphic = `<svg class="diamond" viewBox="0 0 100 100">
Â  Â  Â  Â  Â  	<path d="M50 10 L90 50 L50 90 L10 50 Z" class="base ${bases.first}"/>
Â  Â  Â  Â  Â  	<path d="M50 20 L80 50 L50 80 L20 50 Z" class="base ${bases.second}"/>
Â  Â  Â  Â  Â  	<path d="M50 30 L70 50 L50 70 L30 50 Z" class="base ${bases.third}"/>
Â  Â  Â  Â  	</svg>`;
Â  Â  Â  Â  	
Â  Â  Â  Â  	const lastPlayText = situation.lastPlay ? situation.lastPlay.text : (lastPlays[event.id] || 'N/A');
Â  Â  Â  Â  	if (situation.lastPlay) lastPlays[event.id] = situation.lastPlay.text;
Â  Â  Â  Â  	const playUpdateHTML = `<div class="stats last-play">Last Play: ${lastPlayText}</div>`;
Â  Â  Â  Â  	
Â  Â  Â  Â  	gameDiv.innerHTML = `
Â  Â  Â  Â  Â  	<div class="teams-container">${away} ${vs} ${home}</div>
Â  Â  Â  Â  Â  	<div class="info-container">
Â  Â  Â  Â  Â  Â  	<div class="status">${status}</div>
Â  Â  Â  Â  Â  Â  	<div class="channel">Channel: ${channel}</div>
Â  Â  Â  Â  Â  	</div>
Â  Â  Â  Â  Â  	${stats ? `<div class="stats">${stats}</div>` : ''}
Â  Â  Â  Â  Â  	${playUpdateHTML}
Â  Â  Â  Â  Â  	${graphic}
Â  Â  Â  Â  	`;
Â  Â  Â  Â  	currentContainer.appendChild(gameDiv);
Â  Â  Â  	});
Â  Â  Â  	upcomingContainer.innerHTML = upcomingGames.length === 0 ? '<p class="no-games">No other games scheduled today.</p>' : '';
Â  Â  Â  	upcomingGames.forEach(event => {
Â  Â  Â  Â  	const gameDiv = document.createElement('div');
Â  Â  Â  Â  	gameDiv.className = 'game';
Â  Â  Â  Â  	const homeTeam = event.competitions[0].competitors.find(c => c.homeAway === 'home');
Â  Â  Â  Â  	const awayTeam = event.competitions[0].competitors.find(c => c.homeAway === 'away');
Â  Â  Â  Â  	const awayLogo = awayTeam.team.logo || 'https://placehold.co/40x40';
Â  Â  Â  Â  	const homeLogo = homeTeam.team.logo || 'https://placehold.co/40x40';
Â  Â  Â  Â  	const isCompleted = event.status.type.state === 'post';
Â  Â  Â  Â  	const scoreClass = 'score';
Â  Â  Â  Â  	const awayRank = awayTeam.rank ? `#${awayTeam.rank}` : '';
Â  Â  Â  Â  	const homeRank = homeTeam.rank ? `#${homeTeam.rank}` : '';
Â  Â  Â  Â  	const awayRecord = formatRecord(awayTeam.records ? awayTeam.records[0]?.summary : '');
Â  Â  Â  Â  	const homeRecord = formatRecord(homeTeam.records ? homeTeam.records[0]?.summary : '');
Â  Â  Â  Â  	const away = `<div class="team away"><img loading="lazy" src="${awayLogo}" alt="${awayTeam.team.displayName} logo"><span class="rank">${awayRank}</span>${awayTeam.team.displayName}<span class="record">${awayRecord}</span> <span class="${scoreClass}">${awayTeam.score || 0}</span></div>`;
Â  Â  Â  Â  	const vs = `<div class="vs">@</div>`;
Â  Â  Â  Â  	const home = `<div class="team"><img loading="lazy" src="${homeLogo}" alt="${homeTeam.team.displayName} logo"><span class="rank">${homeRank}</span>${homeTeam.team.displayName}<span class="record">${homeRecord}</span> <span class="${scoreClass}">${homeTeam.score || 0}</span></div>`;
Â  Â  Â  Â  	const time = formatEasternTime(event.date, 'college-baseball');
Â  Â  Â  Â  	const channel = event.competitions[0].broadcasts?.[0]?.names?.join(', ') || 'TBD';
Â  Â  Â  Â  	const spread = event.competitions[0].odds?.[0]?.details || 'N/A';
Â  Â  Â  Â  	const status = isCompleted ? 'Final' : '';
Â  Â  Â  Â  	const leadersHtml = isCompleted ? formatStatLeaders(event.competitions[0].leaders) : '';

Â  Â  Â  Â  	gameDiv.innerHTML = `
Â  Â  Â  Â  Â  	<div class="teams-container">${away} ${vs} ${home}</div>
Â  Â  Â  Â  Â  	<div class="info-container">
Â  Â  Â  Â  Â  Â  	<div class="time">${isCompleted ? 'Final' : time}</div>
Â  Â  Â  Â  Â  Â  	<div class="status">${status}</div>
Â  Â  Â  Â  Â  Â  	<div class="channel">Channel: ${channel}</div>
Â  Â  Â  Â  Â  Â  	<div class="spread">Spread: ${spread}</div>
Â  Â  Â  Â  Â  	</div>
Â  Â  Â  Â  Â  	${leadersHtml}
Â  Â  Â  Â  	`;
Â  Â  Â  Â  	upcomingContainer.appendChild(gameDiv);
Â  Â  Â  	});
Â  Â  Â  	if (hasGames === false) {
Â  Â  Â  Â  	currentContainer.innerHTML = '<p class="no-games">NCAA Baseball is currently out of season. Check back in February!</p>';
Â  Â  Â  Â  	upcomingContainer.innerHTML = '';
Â  Â  Â  	}
Â  Â  Â  	if (document.getElementById('ncaabb').classList.contains('active') && !isCycling) {
Â  Â  Â  Â  	startAutoScroll('ncaabb', 267750);
Â  Â  Â  	}
Â  Â  	} catch (error) {
Â  Â  Â  	console.error('Error fetching NCAA Baseball games:', error);
Â  Â  Â  	currentContainer.innerHTML = '<p class="no-games">Error fetching live games.</p>';
Â  Â  Â  	upcomingContainer.innerHTML = '<p class="no-games">Error fetching upcoming games.</p>';
Â  Â  Â  	leaguesWithGames['ncaabb'] = false;
Â  Â  	}
Â  Â  	updateTabVisibility();
Â  	}
Â  	async function fetchDGPTSchedule() {
Â  Â  	const container = document.getElementById('dgpt-schedule');
Â  Â  	const dgptLeagueDiv = document.getElementById('dgpt');
Â  Â  	if (!container || !dgptLeagueDiv) {
Â  Â  Â  	console.error('DGPT containers not found');
Â  Â  Â  	return;
Â  Â  	}

Â  Â  	// Remove any old section wrapper to fix spacing
Â  Â  	const sectionWrapper = container.closest('.section');
Â  Â  	if (sectionWrapper) {
Â  Â  		dgptLeagueDiv.appendChild(container);
Â  Â  		sectionWrapper.remove();
Â  Â  	}

Â  Â  	container.innerHTML = '<p class="no-games">Loading DGPT World Rankings...</p>';

Â  Â  	const scraperUrl = 'https://scoreboard-scraper.vercel.app/api/scrape'; 

Â  Â  	try {
Â  Â  		const response = await fetch(scraperUrl);
Â  Â  Â  Â  if (!response.ok) {
Â  Â  Â  Â  Â  	throw new Error('Network response was not ok');
Â  Â  Â  Â  }
Â  Â  Â  Â  const data = await response.json();
Â  Â  Â  Â  const { mpo, fpo } = data;

Â  Â  Â  Â  if (!mpo || !fpo || mpo.length === 0 || fpo.length === 0) {
Â  Â  Â  Â  Â  throw new Error('Scraped data is empty or invalid.');
Â  Â  Â  Â  }

Â  Â  Â  Â  container.innerHTML = `
Â  Â  Â  Â  Â  	<div class="standings-container" style="flex-direction: column; align-items: center;">
Â  Â  Â  Â  Â  Â  	<div class="standings-division" style="width: 80%;">
Â  Â  Â  Â  Â  Â  Â  	<h3>MPO World Rankings</h3>
Â  Â  Â  Â  Â  Â  Â  	<table class="standings-table" style="margin-top: 5px;">
Â  Â  Â  Â  Â  Â  Â  Â  	<thead><tr><th>Rank</th><th>Name</th><th>Points</th></tr></thead>
Â  Â  Â  Â  Â  Â  Â  Â  	<tbody>
Â  Â  Â  Â  Â  Â  Â  Â  Â  	${mpo.map(player => `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  	<tr>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  	<td>${player.rank}</td>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  	<td>${player.name}</td>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  	<td>${player.points}</td>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  	</tr>
Â  Â  Â  Â  Â  Â  Â  Â  Â  	`).join('')}
Â  Â  Â  Â  Â  Â  Â  Â  	</tbody>
Â  Â  Â  Â  Â  Â  Â  	</table>
Â  Â  Â  Â  Â  Â  	</div>
Â  Â  Â  Â  Â  Â  	<div class="standings-division" style="width: 80%;">
Â  Â  Â  Â  Â  Â  Â  	<h3>FPO World Rankings</h3>
Â  Â  Â  Â  Â  Â  Â  	<table class="standings-table" style="margin-top: 5px;">
Â  Â  Â  Â  Â  Â  Â  Â  	<thead><tr><th>Rank</th><th>Name</th><th>Points</th></tr></thead>
Â  Â  Â  Â  Â  Â  Â  Â  	<tbody>
Â  Â  Â  Â  Â  Â  Â  Â  Â  	${fpo.map(player => `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  	<tr>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  	<td>${player.rank}</td>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  	<td>${player.name}</td>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  	<td>${player.points}</td>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  	</tr>
Â  Â  Â  Â  Â  Â  Â  Â  Â  	`).join('')}
Â  Â  Â  Â  Â  Â  Â  Â  	</tbody>
Â  Â  Â  Â  Â  Â  Â  	</table>
Â  Â  Â  Â  Â  Â  	</div>
Â  Â  Â  Â  Â  	</div>
Â  Â  Â  Â  	`;
Â  Â  Â  	} catch(error) {
Â  Â  Â  Â  	console.error('Error fetching DGPT rankings:', error);
Â  Â  Â  Â  	container.innerHTML = '<p class="no-games">Could not load DGPT rankings.</p>';
Â  Â  Â  	}
	}
Â  	
Â  	async function fetchAndRenderProStandings(sport, league, containerId, sectionId) {
Â  Â  	const container = document.getElementById(containerId);
Â  Â  	const section = document.getElementById(sectionId);
Â  Â  	const url = `https://site.api.espn.com/apis/v2/sports/${sport}/${league}/standings`;
Â  Â  	const divisionMap = proDivisions[league];

Â  Â  	try {
Â  Â  Â  	const response = await fetch(url);
Â  Â  Â  	if (!response.ok) throw new Error(`HTTP ${response.status}`);
Â  Â  Â  	const data = await response.json();
Â  Â  Â  Â Â 
Â  Â  Â  	const allTeams = data.children.flatMap(conference =>Â 
Â  Â  Â  Â  	 Â (conference.children || [conference]).flatMap(group => group.standings ? group.standings.entries : [])
Â  Â  Â  	);

Â  Â  Â  	if (!allTeams || allTeams.length === 0) {
Â  Â  Â  Â  	section.style.display = 'none';
Â  Â  Â  Â  	return;
Â  Â  Â  	}

Â  Â  Â  	const isPreseason = allTeams.every(team => {
Â  Â  Â  Â  	const wins = team.stats.find(s => s.name === 'wins')?.value || 0;
Â  Â  Â  Â  	const losses = team.stats.find(s => s.name === 'losses')?.value || 0;
Â  Â  Â  Â  	return wins === 0 && losses === 0;
Â  Â  Â  	});

Â  Â  Â  	if (isPreseason) {
Â  Â  Â  Â  	section.style.display = 'none';
Â  Â  Â  Â  	return;
Â  Â  Â  	}
Â  Â  Â  	 Â if (data.season && data.season.endDate) {
Â  Â  Â  Â  	 Â const lastUpdated = new Date(data.season.endDate);
Â  Â  Â  Â  	 Â const now = new Date();
Â  Â  Â  Â  	 Â const ageInDays = (now - lastUpdated) / (1000 * 60 * 60 * 24);
Â  Â  Â  Â  	 Â if (ageInDays > 60 && now > lastUpdated) {
Â  Â  Â  Â  Â  	 Â section.style.display = 'none';
Â  Â  Â  Â  Â  	 Â return;
Â  Â  Â  Â  	 Â }
Â  Â  Â  	}
Â  Â  Â  	
Â  Â  Â  	section.style.display = 'block';
Â  Â  Â  	let html = '<div class="standings-container">';
Â  Â  Â  	
Â  Â  Â  	if (league === 'nfl' || league === 'mlb') {
Â  Â  Â  Â  	const teamsByDivision = {};
Â  Â  Â  Â  	allTeams.forEach(team => {
Â  Â  Â  Â  Â  	for (const division in divisionMap) {
Â  Â  Â  Â  Â  Â  	if (divisionMap[division].includes(team.team.displayName)) {
Â  Â  Â  Â  Â  Â  Â  	if (!teamsByDivision[division]) {
Â  Â  Â  Â  Â  Â  Â  Â  	teamsByDivision[division] = [];
Â  Â  Â  Â  Â  Â  Â  	}
Â  Â  Â  Â  Â  Â  Â  	teamsByDivision[division].push(team);
Â  Â  Â  Â  Â  Â  Â  	break;
Â  Â  Â  Â  Â  Â  	}
Â  Â  Â  Â  Â  	}
Â  Â  Â  Â  	});

Â  Â  Â  Â  	const conferenceDivisions = league === 'nfl'Â 
Â  Â  Â  Â  Â  	? { 'AFC': ['AFC East', 'AFC North', 'AFC South', 'AFC West'], 'NFC': ['NFC East', 'NFC North', 'NFC South', 'NFC West'] }
Â  Â  Â  Â  Â  	: { 'AL': ['AL East', 'AL Central', 'AL West'], 'NL': ['NL East', 'NL Central', 'NL West'] };
Â  Â  Â  Â  	
Â  Â  Â  Â  	for (const conf in conferenceDivisions) {
Â  Â  Â  Â  Â  	let allTeamsInConference = [];
Â  Â  Â  Â  Â  	let divisionWinnerIds = new Set();
Â  Â  Â  Â  Â  	
Â  Â  Â  Â  Â  	conferenceDivisions[conf].forEach(divName => {
Â  Â  Â  Â  Â  Â  	const teams = teamsByDivision[divName];
Â  Â  Â  Â  Â  Â  	if (teams) {
Â  Â  Â  Â  Â  Â  Â  	teams.sort((a, b) => {
Â  Â  Â  Â  Â  Â  Â  Â  	const rankA = a.stats.find(s => s.type === 'rank' || s.name === 'divisionRank')?.value || 99;
Â  Â  Â  Â  Â  Â  Â  Â  	const rankB = b.stats.find(s => s.type === 'rank' || s.name === 'divisionRank')?.value || 99;
Â  Â  Â  Â  Â  Â  Â  Â  	return rankA - rankB;
Â  Â  Â  Â  Â  Â  Â  	});
Â  Â  Â  Â  Â  Â  Â  	html += generateStandingsTable(divName, teams, league);
Â  Â  Â  Â  Â  Â  Â  	allTeamsInConference.push(...teams);
Â  Â  Â  Â  Â  Â  Â  	if(teams.length > 0) divisionWinnerIds.add(teams[0].team.id);
Â  Â  Â  Â  Â  Â  	}
Â  Â  Â  Â  Â  	});

Â  Â  Â  Â  Â  	const sortFn = (a, b) => {
Â  Â  Â  Â  Â  Â  	const pctA = a.stats.find(s => s.name === 'winPercent')?.value || 0;
Â  Â  Â  Â  Â  Â  	const pctB = b.stats.find(s => s.name === 'winPercent')?.value || 0;
Â  Â  Â  Â  Â  Â  	if (pctB !== pctA) return pctB - pctA;
Â  Â  Â  Â  Â  Â  	const winsA = a.stats.find(s => s.name === 'wins')?.value || 0;
Â  Â  Â  Â  Â  Â  	const winsB = b.stats.find(s => s.name === 'wins')?.value || 0;
Â  Â  Â  Â  Â  Â  	return winsB - winsA;
Â  Â  Â  Â  Â  	};

Â  Â  Â  Â  Â  	const wildCardContenders = allTeamsInConference
Â  Â  Â  Â  Â  Â  	.filter(teamEntry => !divisionWinnerIds.has(teamEntry.team.id))
Â  Â  Â  Â  Â  Â  	.sort(sortFn);
Â  Â  Â  Â  Â  	
Â  Â  Â  Â  Â  	const wildCardTeams = wildCardContenders.slice(0, 3);
Â  Â  Â  Â  Â  	if (wildCardTeams.length > 0) {
Â  Â  Â  Â  Â  Â  	html += generateStandingsTable(`${conf} Wild Card`, wildCardTeams, league);
Â  Â  Â  Â  Â  	}
Â  Â  Â  Â  	}
Â  Â  Â  	} else { // For NBA, NHL
Â  Â  Â  Â  	data.children.forEach(group => {
Â  Â  Â  Â  Â  	if(group.standings) {
Â  Â  Â  Â  Â  Â  	html += generateStandingsTable(group.name, group.standings.entries, league);
Â  Â  Â  Â  Â  	}
Â  Â  Â  Â  	});
Â  Â  Â  	}


Â  Â  Â  	html += '</div>';
Â  Â  Â  	container.innerHTML = html;

Â  Â  	} catch (error) {
Â  Â  Â  	console.error(`Error fetching ${league.toUpperCase()} standings:`, error);
Â  Â  Â  	section.style.display = 'none';
Â  Â  	}
Â  	}
Â  	
Â  	function generateStandingsTable(title, teams, league) {
Â  Â  	let tableHeader = '';
Â  Â  	switch(league) {
Â  Â  Â  	case 'nfl':
Â  Â  Â  Â  	tableHeader = '<th>Team</th><th>W</th><th>L</th><th>T</th><th>PCT</th>';
Â  Â  Â  Â  	break;
Â  Â  Â  	case 'mlb':
Â  Â  Â  Â  	tableHeader = '<th>Team</th><th>W</th><th>L</th><th>GB</th><th>PCT</th>';
Â  Â  Â  Â  	break;
Â  Â  Â  	case 'nhl':
Â  Â  Â  Â  	 Â tableHeader = '<th>Team</th><th>GP</th><th>W</th><th>L</th><th>OT</th><th>Pts</th>';
Â  Â  Â  Â  	break;
Â  Â  Â  	case 'nba':
Â  Â  Â  Â  	tableHeader = '<th>Team</th><th>W</th><th>L</th><th>PCT</th><th>GB</th>';
Â  Â  Â  Â  	break;
Â  Â  	}

Â  Â  	const tableRows = teams.map(entry => {
Â  Â  Â  	const team = entry.team;
Â  Â  Â  	const stats = {};
Â  Â  Â  	entry.stats.forEach(stat => {
Â  Â  Â  Â  	stats[stat.name] = stat.displayValue;
Â  Â  Â  	});
Â  Â  Â  	
Â  Â  Â  	let rowData = '';
Â  Â  Â  Â  	switch(league) {
Â  Â  Â  Â  Â  	case 'nfl':
Â  Â  Â  Â  Â  Â  	rowData = `<td>${stats.wins || 0}</td><td>${stats.losses || 0}</td><td>${stats.ties || 0}</td><td>${stats.winPercent || '.000'}</td>`;
Â  Â  Â  Â  Â  Â  	break;
Â  Â  Â  Â  Â  	case 'mlb':
Â  Â  Â  Â  Â  Â  	rowData = `<td>${stats.wins || 0}</td><td>${stats.losses || 0}</td><td>${stats.gamesBehind || '0'}</td><td>${stats.winPercent || '.000'}</td>`;
Â  Â  Â  Â  Â  Â  	break;
Â  Â  Â  Â  Â   case 'nhl':
Â  Â  Â  Â  Â  Â  	rowData = `<td>${stats.gamesPlayed || 0}</td><td>${stats.wins || 0}</td><td>${stats.losses || 0}</td><td>${stats.overtimeLosses || 0}</td><td>${stats.points || 0}</td>`;
Â  Â  Â  Â  Â  Â  	break;
Â  Â  Â  Â  Â  	case 'nba':
Â  Â  Â  Â  Â  Â  	rowData = `<td>${stats.wins || 0}</td><td>${stats.losses || 0}</td><td>${stats.winPercent || '.000'}</td><td>${stats.gamesBehind || '0'}</td>`;
Â  Â  Â  Â  Â  Â  	break;
Â  Â  Â  	}

Â  Â  Â  	return `
Â  Â  Â  Â  	 Â <tr>
Â  Â  Â  Â  Â  	 Â <td><img loading="lazy" src="${team.logos[0]?.href || 'https://placehold.co/40x40'}" alt="${team.displayName} logo">${team.displayName}</td>
Â  Â  Â  Â  Â  	 Â ${rowData}
Â  Â  Â  Â  	 Â </tr>
Â  Â  Â  	`;
Â  Â  	}).join('');

Â  Â  	return `
Â  Â  Â  	 Â <div class="standings-division">
Â  Â  Â  Â  	 Â <h3>${title}</h3>
Â  Â  Â  Â  	 Â <table class="standings-table">
Â  Â  Â  Â  Â  	 Â <thead><tr>${tableHeader}</tr></thead>
Â  Â  Â  Â  Â  	 Â <tbody>${tableRows}</tbody>
Â  Â  Â  Â  	 Â </table>
Â  Â  Â  	 Â </div>
Â  Â  	`;
Â  	}


Â  	async function fetchStandings() {
Â  Â  	const footballContainer = document.getElementById('ncaa-football-standings');
Â  Â  	const basketballContainer = document.getElementById('ncaab-standings');
Â  Â  	const footballSection = document.getElementById('ncaa-football-standings-section');
Â  Â  	const basketballSection = document.getElementById('ncaab-standings-section');
Â  Â  	
Â  Â  	let hasContent = false;
Â  Â  	// Fetch Pro Standings
Â  Â  	await fetchAndRenderProStandings('football', 'nfl', 'nfl-standings', 'nfl-standings-section');
Â  Â  	await fetchAndRenderProStandings('baseball', 'mlb', 'mlb-standings', 'mlb-standings-section');
Â  Â  	await fetchAndRenderProStandings('hockey', 'nhl', 'nhl-standings', 'nhl-standings-section');
Â  Â  	await fetchAndRenderProStandings('basketball', 'nba', 'nba-standings', 'nba-standings-section');

Â  Â  	// Fetch NCAA Football Standings
Â  Â  	try {
Â  Â  Â  	const footballUrl = 'https://site.api.espn.com/apis/site/v2/sports/football/college-football/rankings';
Â  Â  Â  	const footballResponse = await fetch(footballUrl);
Â  Â  Â  	if (!footballResponse.ok) throw new Error(`HTTP ${footballResponse.status}`);
Â  Â  Â  	const footballData = await footballResponse.json();
Â  Â  Â  	const apPoll = footballData.rankings.find(rank => rank.name === 'AP Top 25');
Â  Â  Â  	if (apPoll) {
Â  Â  Â  Â  	const lastUpdated = new Date(apPoll.lastUpdated);
Â  Â  Â  Â  	const now = new Date();
Â  Â  Â  Â  	const ageInDays = (now - lastUpdated) / (1000 * 60 * 60 * 24);
Â  Â  Â  Â  	if (ageInDays <= 60) {
Â  Â  Â  Â  Â  	const teams = apPoll.ranks.slice(0, 25);
Â  Â  Â  Â  Â  	footballContainer.innerHTML = `
Â  Â  Â  Â  Â  Â  	<table class="standings-table">
Â  Â  Â  Â  Â  Â  	  <thead>
Â  Â  Â  Â  Â  Â  Â  	<tr>
Â  Â  Â  Â  Â  Â  Â  Â  	<th>Rank</th>
Â  Â  Â  Â  Â  Â  Â  Â  	<th>Team</th>
Â  Â  Â  Â  Â  Â  Â  Â  	<th>Record</th>
Â  Â  Â  Â  Â  Â  Â  	</tr>
Â  Â  Â  Â  Â  Â  	  </thead>
Â  Â  Â  Â  Â  Â  	  <tbody>
Â  Â  Â  Â  Â  Â  Â  	${teams.map(team => `
Â  Â  Â  Â  Â  Â  Â  Â  	<tr>
Â  Â  Â  Â  Â  Â  Â  Â  Â  	<td>${team.current}</td>
Â  Â  Â  Â  Â  Â  Â  Â  Â  	<td><img loading="lazy" src="${team.team.logos[0]?.href || 'https://placehold.co/40x40'}" alt="${team.team.location} ${team.team.name} logo">${team.team.location} ${team.team.name}</td>
Â  Â  Â  Â  Â  Â  Â  Â  Â  	<td>${team.recordSummary || 'N/A'}</td>
Â  Â  Â  Â  Â  Â  Â  Â  	</tr>
Â  Â  Â  Â  Â  Â  Â  	`).join('')}
Â  Â  Â  Â  Â  Â  	  </tbody>
Â  Â  Â  Â  Â  Â  	</table>
Â  Â  Â  Â  Â  	`;
Â  Â  Â  Â  Â  	hasContent = true;
Â  Â  Â  Â  Â  	footballSection.style.display = 'block';
Â  Â  Â  Â  	} else {
Â  Â  Â  Â  Â  	footballSection.style.display = 'none';
Â  Â  Â  Â  	}
Â  Â  Â  	} else {
Â  Â  Â  Â  	footballSection.style.display = 'none';
Â  Â  Â  	}
Â  Â  	} catch (error) {
Â  Â  Â  	console.error('Error fetching NCAA Football rankings:', error);
Â  Â  Â  	footballSection.style.display = 'none';
Â  Â  	}
Â  Â  	
Â  Â  	// Fetch NCAA Basketball Standings
Â  Â  	try {
Â  Â  Â  	const basketballUrl = 'https://site.api.espn.com/apis/site/v2/sports/basketball/mens-college-basketball/rankings';
Â  Â  Â  	const basketballResponse = await fetch(basketballUrl);
Â  Â  Â  	if (!basketballResponse.ok) throw new Error(`HTTP ${basketballResponse.status}`);
Â  Â  Â  	const basketballData = await basketballResponse.json();
Â  Â  Â  	const apPoll = basketballData.rankings.find(rank => rank.name === 'AP Top 25');
Â  Â  Â  	if (apPoll) {
Â  Â  Â  Â  	const lastUpdated = new Date(apPoll.lastUpdated);
Â  Â  Â  Â  	const now = new Date();
Â  Â  Â  Â  	const ageInDays = (now - lastUpdated) / (1000 * 60 * 60 * 24);
Â  Â  Â  Â  	if (ageInDays <= 60) {
Â  Â  Â  Â  Â  	const teams = apPoll.ranks.slice(0, 25);
Â  Â  Â  Â  Â  	basketballContainer.innerHTML = `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  	<table class="standings-table">
Â  Â  Â  Â  Â  Â  Â  	<thead>
Â  Â  Â  Â  Â  Â  Â  	  <tr>
Â  Â  Â  Â  Â  Â  Â  Â  	<th>Rank</th>
Â  Â  Â  Â  Â  Â  Â  Â  	<th>Team</th>
Â  Â  Â  Â  Â  Â  Â  Â  	<th>Record</th>
Â  Â  Â  Â  Â  Â  Â  	  </tr>
Â  Â  Â  Â  Â  Â  	</thead>
Â  Â  Â  Â  Â  Â  	<tbody>
Â  Â  Â  Â  Â  Â  Â  	${teams.map(team => `
Â  Â  Â  Â  Â  Â  Â  Â  	<tr>
Â  Â  Â  Â  Â  Â  Â  Â  Â  	<td>${team.current}</td>
Â  Â  Â  Â  Â  Â  Â  Â  Â  	<td><img loading="lazy" src="${team.team.logos[0]?.href || 'https://placehold.co/40x40'}" alt="${team.team.location} ${team.team.name} logo">${team.team.location} ${team.team.name}</td>
Â  Â  Â  Â  Â  Â  Â  Â  Â  	<td>${team.recordSummary || 'N/A'}</td>
Â  Â  Â  Â  Â  Â  Â  Â  	</tr>
Â  Â  Â  Â  Â  Â  Â  	`).join('')}
Â  Â  Â  Â  Â  Â  	</tbody>
Â  Â  Â  Â  Â  Â  	</table>
Â  Â  Â  Â  Â  	`;
Â  Â  Â  Â  Â  	hasContent = true;
Â  Â  Â  Â  Â  	basketballSection.style.display = 'block';
Â  Â  Â  Â  	} else {
Â  Â  Â  Â  Â   basketballSection.style.display = 'none';
Â  Â  Â  Â  	}
Â  Â  Â  	} else {
Â  Â  Â  Â  	basketballSection.style.display = 'none';
Â  Â  Â  	}
Â  Â  	} catch (error) {
Â  Â  Â  	console.error('Error fetching NCAAB rankings:', error);
Â  Â  Â  	basketballSection.style.display = 'none';
Â  Â  	}
Â  Â  	
Â  Â  	leaguesWithGames['standings'] = hasContent || 
Â  Â  Â  	document.getElementById('nfl-standings-section').style.display !== 'none' ||
Â  Â  Â  	document.getElementById('mlb-standings-section').style.display !== 'none' ||
Â  Â  Â  	document.getElementById('nhl-standings-section').style.display !== 'none' ||
Â  Â  Â  	document.getElementById('nba-standings-section').style.display !== 'none';

Â  Â  	updateTabVisibility();
Â  Â  	if (document.getElementById('standings').classList.contains('active') && !isCycling) {
Â  Â  Â  	startAutoScroll('standings', 98438);
Â  Â  	}
Â  	}
Â  	async function fetchScores(league) {
Â  Â  	if (league === 'ncaa') {
Â  Â  Â  	return fetchNCAAGames();
Â  Â  	}
Â  Â  	if (league === 'ncaab') {
Â  Â  Â  	return fetchNCAABGames();
Â  Â  	}
Â  Â  	if (league === 'ncaabb') {
Â  Â  Â  	return fetchNCAABBGames();
Â  Â  	}
Â  Â  	if (league === 'standings') {
Â  Â  Â  	return fetchStandings();
Â  Â  	}
Â  Â  	if (league === 'dgpt') {
Â  Â  Â  	await fetchDGPTSchedule();
Â  Â  Â  	return;
Â  Â  	}
Â  	 
Â  Â  	const currentDate = new Date();
Â  Â  	currentDate.setHours(0, 0, 0, 0);
Â  Â  	const tomorrowDate = new Date(currentDate);
Â  Â  	tomorrowDate.setDate(currentDate.getDate() + 1);
Â  Â  	const url = `https://site.api.espn.com/apis/site/v2/sports/${leagues[league].sport}/${leagues[league].league}/scoreboard?dates=${formatDateForESPN(currentDate)}-${formatDateForESPN(tomorrowDate)}`;
Â  Â  	try {
Â  Â  Â  	let containerId;
Â  Â  Â  	if(league === 'nfl') containerId = 'nfl-scores';
Â  Â  Â  	else if (league === 'mlb') containerId = 'mlb-scores';
Â  Â  Â  	else if (league === 'nba') containerId = 'nba-scores';
Â  Â  Â  	else if (league === 'nhl') containerId = 'nhl-scores';

Â  Â  Â  	const container = document.getElementById(containerId);
Â  Â  Â  	if (!container) {
Â  Â  Â  Â  	console.error(`Container not found for ${containerId}`);
Â  Â  Â  Â  	return;
Â  Â  Â  	}
Â  Â  Â  	container.innerHTML = '';
Â  Â  Â  	const response = await fetch(url);
Â  Â  Â  	if (!response.ok) throw new Error(`HTTP ${response.status}`);
Â  Â  Â  	const data = await response.json();
Â  Â  Â  	const events = data.events ? filterTodayAndTomorrow(data.events) : [];
Â  Â  Â  	leaguesWithGames[league] = events.length > 0;
Â  Â  Â  	if (events.length === 0) {
Â  Â  Â  Â  	container.innerHTML = '<p class="no-games">No games scheduled for today or tomorrow.</p>';
Â  Â  Â  Â  	stopAutoScroll();
Â  Â  Â  	} else {
Â  Â  Â  Â  	events.forEach(event => {
Â  Â  Â  Â  Â  	const gameDiv = document.createElement('div');
Â  Â  Â  Â  Â  	gameDiv.className = 'game';
Â  Â  Â  Â  Â  	gameDiv.id = `game-${event.id}`;
Â  Â  Â  Â  Â  	const homeTeam = event.competitions[0].competitors.find(c => c.homeAway === 'home');
Â  Â  Â  Â  Â  	const awayTeam = event.competitions[0].competitors.find(c => c.homeAway === 'away');
Â  Â  Â  Â  Â  	const awayLogo = awayTeam.team.logo || 'https://placehold.co/40x40';
Â  Â  Â  Â  Â  	const homeLogo = homeTeam.team.logo || 'https://placehold.co/40x40';
Â  Â  Â  Â  Â  	const isLive = event.status.type.state === 'in';
Â  Â  Â  Â  Â  	const isCompleted = event.status.type.state === 'post';
Â  Â  Â  Â  Â  	const isScheduled = event.status.type.state === 'pre';
Â  Â  Â  Â  Â  	const scoreClass = isLive ? 'score live' : 'score';
Â  Â  Â  Â  Â  	const awayRank = awayTeam.rank ? `#${awayTeam.rank}` : '';
Â  Â  Â  Â  Â  	const homeRank = homeTeam.rank ? `#${homeTeam.rank}` : '';
Â  Â  Â  Â  Â  	const awayRecord = formatRecord(awayTeam.records ? awayTeam.records[0]?.summary : '');
Â  Â  Â  Â  Â  	const homeRecord = formatRecord(homeTeam.records ? homeTeam.records[0]?.summary : '');
Â  Â  Â  Â  Â  	const away = `<div class="team away"><img loading="lazy" src="${awayLogo}" alt="${awayTeam.team.displayName} logo">${awayTeam.team.displayName}<span class="record">${awayRecord}</span> <span class="${scoreClass}">${awayTeam.score || 0}</span></div>`;
Â  Â  Â  Â  Â  	const vs = `<div class="vs">@</div>`;
Â  Â  Â  Â  Â  	const home = `<div class="team"><img loading="lazy" src="${homeLogo}" alt="${homeTeam.team.displayName} logo">${homeTeam.team.displayName}<span class="record">${homeRecord}</span> <span class="${scoreClass}">${homeTeam.score || 0}</span></div>`;
Â  Â  Â  Â  Â  	const time = isScheduled ? formatEasternTime(event.date, league) : '';
Â  Â  Â  Â  Â  	const channel = event.competitions[0].broadcasts?.[0]?.names?.join(', ') || 'TBD';
Â  Â  Â  Â  Â  	const spread = isScheduled ? (event.competitions[0].odds?.[0]?.details || 'N/A') : '';
Â  Â  Â  Â  Â  	let status = isCompleted ? 'Final' : event.status.type.description;
Â  Â  Â  Â  Â  	let stats = '';
Â  Â  Â  Â  Â  	let graphic = '';
Â  Â  Â  Â  Â  	let playUpdateHTML = '';
Â  Â  Â  Â  Â  	let leadersHtml = '';

Â  Â  Â  Â  Â  	if (isLive) {
Â  Â  Â  Â  Â  Â  	const situation = event.competitions[0].situation || {};
Â  Â  Â  Â  Â  Â  	const lastPlayText = situation.lastPlay ? situation.lastPlay.text : (lastPlays[event.id] || 'N/A');
Â  Â  Â  Â  Â  Â  	if (situation.lastPlay) lastPlays[event.id] = situation.lastPlay.text;
Â  Â  Â  Â  Â  Â  	playUpdateHTML = `<div class="stats last-play">Last Play: ${lastPlayText}</div>`;
Â  Â  Â  Â  Â  Â  	status = event.status.type.detail;
Â  Â  Â  Â  Â  Â  	
Â  Â  Â  Â  Â  Â  	if (league === 'mlb') {
Â  Â  Â  Â  Â  Â  Â  	const inningText = situation.inning ? `${situation.inning}${getOrdinal(situation.inning)}` : '';
Â  Â  Â  Â  Â  Â  Â  	const topOrBot = situation.topInning ? 'Top' : 'Bot';
Â  Â  Â  Â  Â  Â  Â  	status = situation.inning ? `${topOrBot} ${inningText}` : event.status.type.detail;
Â  Â  Â  Â  Â  Â  Â  	const count = (situation.balls != null && situation.strikes != null) ? `${situation.balls}-${situation.strikes} Count` : '';
Â  Â  Â  Â  Â  Â  Â  	const outs = situation.outs != null ? `${situation.outs} Out${situation.outs !== 1 ? 's' : ''}` : '';
Â  Â  Â  Â  Â  Â  Â  	const batter = situation.batter?.athlete?.displayName || 'Unknown';
Â  Â  Â  Â  Â  Â  Â  	const pitcher = situation.pitcher?.athlete?.displayName || 'Unknown';
Â  Â  Â  Â  Â  Â  Â  	stats = [count, outs, `Batter: ${batter}`, `Pitcher: ${pitcher}`].filter(s => s).join(', ');
Â  Â  Â  Â  Â  Â  Â  	const bases = {
Â  Â  Â  Â  Â  Â  Â  Â  	first: situation.onFirst ? 'active' : '',
Â  Â  Â  Â  Â  Â  Â  Â  	second: situation.onSecond ? 'active' : '',
Â  Â  Â  Â  Â  Â  Â  Â  	third: situation.onThird ? 'active' : ''
Â  Â  Â  Â  Â  Â  Â  	};
Â  Â  Â  Â  Â  Â  Â  	graphic = `<svg class="diamond" viewBox="0 0 100 100">
Â  Â  Â  Â  Â  Â  Â  Â  	<path d="M50 10 L90 50 L50 90 L10 50 Z" class="base ${bases.first}"/>
Â  Â  Â  Â  Â  Â  Â  Â  	<path d="M50 20 L80 50 L50 80 L20 50 Z" class="base ${bases.second}"/>
Â  Â  Â  Â  Â  Â  Â  Â  	<path d="M50 30 L70 50 L50 70 L30 50 Z" class="base ${bases.third}"/>
Â  Â  Â  Â  Â  Â  Â  	</svg>`;
Â  Â  Â  Â  Â  Â  	} else if (league === 'nfl') {
Â  Â  Â  Â  Â  Â  Â  	status = [status, event.status.displayClock].filter(Boolean).join(' - ');
Â  Â  Â  Â  Â  Â  Â  	stats = situation.downDistanceText || '';
Â  Â  Â  Â  Â  Â  	} else if (league === 'nba' || league === 'nhl') {
Â  Â  Â  Â  Â  Â  Â  	stats = event.status.displayClock || '';
Â  Â  Â  Â  Â  Â  	}
Â  Â  Â  Â  Â  	} else if (isCompleted) {
Â  Â  Â  Â  Â  Â  	leadersHtml = formatStatLeaders(event.competitions[0].leaders);
Â  Â  Â  Â  Â  	}

Â  Â  Â  Â  Â  	gameDiv.innerHTML = `
Â  Â  Â  Â  Â  Â  	<div class="teams-container">${away} ${vs} ${home}</div>
Â  Â  Â  Â  Â  Â  	<div class="info-container">
Â  Â  Â  Â  Â  Â  Â  	${isScheduled ? `<div class="time">${time}</div>` : `<div class="status">${status}</div>`}
Â  Â  Â  Â  Â  Â  Â  	<div class="channel">Channel: ${channel}</div>
Â  Â  Â  Â  Â  Â  Â  	${isScheduled ? `<div class="spread">Spread: ${spread}</div>` : ''}
Â  Â  Â  Â  Â  Â  	</div>
Â  Â  Â  Â  Â  Â  	${stats ? `<div class="stats">${stats}</div>` : ''}
Â  Â  Â  Â  Â  Â  	${graphic}
Â  Â  Â  Â  Â  Â  	${playUpdateHTML}
Â  Â  Â  Â  Â  Â  	${leadersHtml}
Â  Â  Â  Â  Â  Â  	`;
Â  Â  Â  Â  Â  	container.appendChild(gameDiv);
Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  if (document.getElementById(league).classList.contains('active') && !isCycling) {
Â  Â  Â  Â  Â  Â  startAutoScroll(containerId, 157500);
Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  Â  updateTabVisibility();
Â  Â  Â  } catch (error) {
Â  Â  Â  Â  console.error(`Error fetching ${league} scores:`, error);
Â  Â  Â  Â  let containerId;
Â  Â  Â  Â  if(league === 'nfl') containerId = 'nfl-scores';
Â  Â  Â  Â  else if (league === 'mlb') containerId = 'mlb-scores';
Â  Â  Â  Â  else if (league === 'nba') containerId = 'nba-scores';
Â  Â  Â  Â  else if (league === 'nhl') containerId = 'nhl-scores';
Â  Â  Â  Â  const container = document.getElementById(containerId);
Â  Â  Â  Â  if (container) {
Â  Â  Â  Â  Â  container.innerHTML = '<p class="no-games">Error fetching scores. Please try again later.</p>';
Â  Â  Â  Â  }
Â  Â  Â  Â  leaguesWithGames[league] = false;
Â  Â  Â  Â  stopAutoScroll();
Â  Â  Â  Â  updateTabVisibility();
Â  Â  Â  }
Â  Â  }
Â  	
Â  	async function updateLiveGame(gameId, league) {
Â  Â  Â  Â  const { sport, league: leagueName } = leagues[league];
Â  Â  Â  Â  const url = `https://site.api.espn.com/apis/site/v2/sports/${sport}/${leagueName}/scoreboard/${gameId}`;
Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  const response = await fetch(url);
Â  Â  Â  Â  Â  Â  if (!response.ok) throw new Error(`HTTP ${response.status}`);
Â  Â  Â  Â  Â  Â  const data = await response.json(); 
Â  Â  Â  Â  Â  Â  const event = data.events[0]; // The single game data is nested here
Â  Â  Â  Â  Â  Â  const gameDiv = document.getElementById(`game-${gameId}`);
Â  Â  Â  Â  Â  Â  if (!gameDiv) return;

Â  Â  Â  Â  Â  Â  const homeTeam = event.competitions[0].competitors.find(c => c.homeAway === 'home');
Â  Â  Â  Â  Â  Â  const awayTeam = event.competitions[0].competitors.find(c => c.homeAway === 'away');
Â  Â  Â  Â  Â  Â  const isLive = event.status.type.state === 'in';

Â  Â  Â  Â  Â  Â  if (!isLive) {
Â  Â  Â  Â  Â  Â  Â  Â  clearInterval(liveGameIntervals[gameId]);
Â  Â  Â  Â  Â  Â  Â  Â  delete liveGameIntervals[gameId];
Â  Â  Â  Â  Â  Â  Â  Â  fetchScores(league);
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  gameDiv.querySelector('.team.home .score').textContent = homeTeam.score || 0;
Â  Â  Â  Â  Â  Â  gameDiv.querySelector('.team.away .score').textContent = awayTeam.score || 0;

Â  Â  Â  Â  Â  Â  const situation = event.competitions[0].situation || {};
Â  Â  Â  Â  Â  Â  const lastPlayText = situation.lastPlay ? situation.lastPlay.text : '';
Â  Â  Â  Â  Â  Â  if (lastPlayText && lastPlays[gameId] !== lastPlayText) {
Â  Â  Â  Â  Â  Â  Â  Â  lastPlays[gameId] = lastPlayText;
Â  Â  Â  Â  Â  Â  Â  Â  const playDiv = gameDiv.querySelector('.last-play');
Â  Â  Â  Â  Â  Â  Â  Â  if (playDiv) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  playDiv.textContent = `Last Play: ${lastPlayText}`;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  console.error(`Error updating game ${gameId}:`, error);
Â  Â  Â  Â  Â  Â  clearInterval(liveGameIntervals[gameId]);
Â  Â  Â  Â  Â  Â  delete liveGameIntervals[gameId];
Â  Â  Â  Â  }
Â  Â  }

Â  Â  function pollLiveGames() {
Â  Â  Â  Â  Object.values(liveGameIntervals).forEach(clearInterval);
Â  Â  Â  Â  liveGameIntervals = {};
Â  Â  Â  Â Â 
Â  Â  Â  Â  document.querySelectorAll('.game[id^="game-"]').forEach(gameDiv => {
Â  Â  Â  Â  Â  Â  if (gameDiv.querySelector('.score.live')) {
Â  Â  Â  Â  Â  Â  Â  Â  const gameId = gameDiv.id.split('-')[1];
Â  Â  Â  Â  Â  Â  Â  Â  const league = gameDiv.closest('.league').id.replace('-scores', '');
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  if (!liveGameIntervals[gameId]) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  liveGameIntervals[gameId] = setInterval(() => updateLiveGame(gameId, league), 15000);
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  });
Â  Â  }

Â  Â  function updateAll() {
Â  Â  Â  Object.values(liveGameIntervals).forEach(clearInterval);
Â  Â  Â  liveGameIntervals = {};
Â  Â  Â Â 
Â  Â  Â  Object.keys(leagues).forEach(league => {
Â  Â  Â  Â  fetchScores(league);
Â  Â  Â  });

Â  Â  Â  setTimeout(pollLiveGames, 5000);
Â  Â  }
Â  Â  document.querySelectorAll('.tabs .tab').forEach(tab => {
Â  Â  Â  tab.addEventListener('click', () => {
Â  Â  Â  Â  if (isCycling) {
Â  Â  Â  Â  Â  cycleTabs();
Â  Â  Â  Â  }
Â  Â  Â  Â  stopAutoScroll();
Â  Â  Â  Â  document.querySelectorAll('.tabs .tab').forEach(t => t.classList.remove('active'));
Â  Â  Â  Â  document.querySelectorAll('.league').forEach(l => l.classList.remove('active'));
Â  Â  Â  Â  tab.classList.add('active');
Â  Â  Â  Â  const activeLeague = tab.dataset.league;
Â  Â  Â  Â  document.getElementById(activeLeague).classList.add('active');
Â  Â  Â  Â  const activeContainerId = activeLeague === 'ncaa' ? 'ncaa' : activeLeague === 'nfl' ? 'nfl-scores' : activeLeague === 'mlb' ? 'mlb-scores' : activeLeague === 'nhl' ? 'nhl-scores' : activeLeague === 'ncaab' ? 'ncaab' : activeLeague === 'ncaabb' ? 'ncaabb' : activeLeague === 'nba' ? 'nba-scores' : activeLeague === 'dgpt' ? 'dgpt' : 'standings';
Â  Â  Â  Â  if (!isCycling) {
Â  Â  Â  Â  Â  fetchScores(activeLeague).then(() => {
Â  Â  Â  Â  Â  Â  if (activeLeague !== 'gemini') {
Â  Â  Â  Â  Â  Â  Â  Â  startAutoScroll(activeContainerId, activeLeague === 'ncaa' || activeLeague === 'ncaab' || activeLeague === 'ncaabb' ? 267750 : activeLeague === 'dgpt' ? 33469 : activeLeague === 'standings' ? 98438 : 157500);
Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(pollLiveGames, 2000);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }
Â  Â  Â  });
Â  Â  });
Â  Â  setInterval(updateAll, 3600000); // Refresh all data every hour
Â  	updateAll();
Â  	
Â  	// Settings functionality
Â  	let leagueVisibility = JSON.parse(localStorage.getItem('leagueVisibility')) || {};
Â  	let customHeader = localStorage.getItem('customHeader');
Â  	const header = document.querySelector('h1');
Â  	if (customHeader) {
Â  Â  	header.textContent = customHeader;
Â  	}
Â  	const tabs = document.querySelectorAll('.tabs .tab');
Â  	tabs.forEach(tab => {
Â  Â  	if (leagueVisibility[tab.dataset.league] === false) {
Â  Â  Â  	tab.classList.add('hidden');
Â  Â  	}
Â  	});
Â  	const settingsBtn = document.getElementById('settings-btn');
Â  	const settingsModal = document.getElementById('settings-modal');
Â  	const headerInput = document.getElementById('header-input');
Â  	const saveSettingsBtn = document.getElementById('save-settings');
Â  	const leagueToggles = document.getElementById('league-toggles');
Â  	if (settingsBtn && settingsModal) {
Â  Â  	settingsBtn.addEventListener('click', () => {
Â  Â  Â  	headerInput.value = header.textContent;
Â  Â  Â  	leagueToggles.innerHTML = '';
Â  Â  Â  	tabs.forEach(tab => {
Â  Â  Â  Â  	const label = document.createElement('label');
Â  Â  Â  Â  	const checkbox = document.createElement('input');
Â  Â  Â  Â  	checkbox.type = 'checkbox';
Â  Â  Â  Â  	checkbox.dataset.league = tab.dataset.league;
Â  Â  Â  Â  	checkbox.checked = leagueVisibility[tab.dataset.league] !== false && !tab.classList.contains('hidden');
Â  Â  Â  Â  	label.appendChild(checkbox);
Â  Â  Â  Â  	label.appendChild(document.createTextNode(' ' + tab.textContent));
Â  Â  Â  Â  	leagueToggles.appendChild(label);
Â  Â  Â  	});
Â  Â  Â  	settingsModal.style.display = 'block';
Â  Â  	});
Â  Â  	saveSettingsBtn.addEventListener('click', () => {
Â  Â  Â  	const newHeader = headerInput.value;
Â  Â  Â  	header.textContent = newHeader;
Â  Â  Â  	localStorage.setItem('customHeader', newHeader);
Â  Â  Â  	const checkboxes = leagueToggles.querySelectorAll('input[type="checkbox"]');
Â  Â  Â  	checkboxes.forEach(checkbox => {
Â  Â  Â  Â  	const tab = document.querySelector(`.tab[data-league="${checkbox.dataset.league}"]`);
Â  Â  Â  Â  	leagueVisibility[checkbox.dataset.league] = checkbox.checked;
Â  Â  Â  Â  	if (checkbox.checked) {
Â  Â  Â  Â  Â  	tab.classList.remove('hidden');
Â  Â  Â  Â  	} else {
Â  Â  Â  Â  Â  	tab.classList.add('hidden');
Â  Â  Â  Â  	}
Â  Â  Â  	});
Â  Â  Â  	localStorage.setItem('leagueVisibility', JSON.stringify(leagueVisibility));
Â  Â  Â  	const activeTab = document.querySelector('.tab.active');
Â  Â  Â  	if (activeTab && activeTab.classList.contains('hidden')) {
Â  Â  Â  Â  	const firstVisibleTab = document.querySelector('.tab:not(.hidden)');
Â  Â  Â  Â  	if (firstVisibleTab) {
Â  Â  Â  Â  Â  	firstVisibleTab.click();
Â  Â  Â  Â  	}
Â  Â  Â  	}
Â  Â  Â  	settingsModal.style.display = 'none';
Â  Â  	});
Â  	}
</script>
</body>
</html>

